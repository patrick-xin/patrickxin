{
  "cacheItemsMap": {
    "add-multiple-theme-to-nextjs-project.mdx": {
      "document": {
        "title": "Add Multiple Theme To Next.JS and Tailwind Project",
        "publishedAt": "June 6, 2022",
        "description": "Switch themes easily with few lines of code.",
        "image": "/assets/images/add-multiple-theme-to-nextjs-project/bg.jpg",
        "isPublished": true,
        "toc": true,
        "thumbnail": {
          "author": "Keila Hötzel",
          "url": "/assets/images/add-multiple-theme-to-nextjs-project/bg.jpg",
          "from": "https://unsplash.com/@keilahoetzel"
        },
        "category": "web",
        "tags": [
          "next.js",
          "tailwind",
          "theme",
          "react"
        ],
        "body": {
          "raw": "\n## Intro\n\nNowadays we have a lot of projects that need to be styled with Tailwind. In some cases, you may need to add multiple themes to your project. In today's article, I will show you how easy it is to do so with a few setups. The easiest way is to use [`next-themes`](https://github.com/pacocoursey/next-themes).\n\n> 🌱 Checkout [deployed version](https://theme-switch-iota.vercel.app/) to see the what final result looks like. Source code can be found [here](https://github.com/patrick-xin/theme-switch)\n\n## Crate a New Project\n\nInitialize a new Next.JS project with Tailwind by running `npx create-next-app with-tailwind multiple-themes`.\n\n### Add Theme Provider\n\n```tsx:pages/_app.tsx {2, 7, 9} showLineNumbers\nimport '../styles/globals.css'\nimport { ThemeProvider } from 'next-themes'\nimport type { AppProps } from 'next/app'\n\nfunction MyApp({ Component, pageProps }: AppProps) {\n  return (\n    <ThemeProvider enableSystem={false} disableTransitionOnChange>\n      <Component {...pageProps} />\n    </ThemeProvider>\n  )\n}\n\nexport default MyApp\n```\n\n## Configure Tailwind CSS\n\n### Add CSS Variables\n\nWe need to define CSS variables inside `globals.css` file so that Tailwind knows how to access them.\n\n```css:globals.css {22-24} showLineNumbers\n@layer base {\n  :root {\n    --bg-color: #f4f4f0;\n    --text-color: #212121;\n  }\n\n  [data-theme='dark'] {\n    --bg-color: #212121;\n    --text-color: #f4f4f0;\n  }\n\n  [data-theme='yellow'] {\n    --bg-color: #ffc300;\n    --text-color: #f4f4f0;\n  }\n\n  [data-theme='purple'] {\n    --bg-color: #39009e;\n    --text-color: #15b2fb;\n  }\n\n  body {\n    @apply relative text-pageText bg-pageBG;\n  }\n}\n```\n\nThese are arbitrary CSS variables that I created, feel free to change them based on your taste. Don't forget to apply those variables to the `body` element.\n\n### Add CSS Variables to Tailwind\n\nAdd the highlighted lines to your `tailwind.config.js` file.\n\n```js:tailwind.config.js {8-11} showLineNumbers\nmodule.exports = {\n  content: [\n    \"./pages/**/*.{js,ts,jsx,tsx}\",\n    \"./components/**/*.{js,ts,jsx,tsx}\",\n  ],\n  theme: {\n    extend: {\n      colors: {\n        BackgroundColor: \"var(--bg-color)\",\n        TextColor: \"var(--text-color)\",\n      },\n    },\n  },\n  plugins: [],\n};\n```\n\nWith current configuration, we are ready to change themes.\n\n## Define Theme Object\n\nIn order to switch between themes, we need to create a theme object which contains the themes that our website can use.\n\n```tsx:constants/theme.tsx showLineNumbers\nexport const themes: ITheme[] = [\n  {\n    title: \"Light\",\n    name: \"light\",\n    emoji: <span>🌞</span>,\n  },\n  {\n    title: \"Dark\",\n    name: \"dark\",\n    emoji: <span>🌙</span>,\n  },\n  {\n    title: \"Yellow\",\n    name: \"yellow\",\n    emoji: <span>🌼</span>,\n  },\n  {\n    title: \"Purple\",\n    name: \"purple\",\n    emoji: <span>🦄</span>,\n  },\n];\n```\n\nAs I'm using TypeScript, I've also created a `ITheme interface`. If you are unfamiliar with TypeScript, you can skip this type definition.\n\n```ts:types/theme.ts showLineNumbers\nexport type ThemeName = \"light\" | \"dark\" | \"yellow\" | \"purple\";\nexport type ThemeTitle = Capitalize<ThemeName>;\n\nexport interface ITheme {\n  title: ThemeTitle;\n  name: ThemeName;\n  emoji: React.ReactNode;\n}\n```\n\nFor more type safty, we're using [`Template Literal Types`](https://www.typescriptlang.org/docs/handbook/2/template-literal-types.html#capitalizestringtype) to define the type of the `title` and `name` properties. `title` will be shown in the UI and `name` will be used to tell `next-themes` what current theme we are using.\n\n## Create ThemeSwitch Component\n\nThere are various ways create a switcher, you can either use a dropdown select or a button. I will create both just for fun.\n\n### ThemeSwtichButton Component\n\nLet's create a switch button first.\n\n```tsx:components/ThemeSwtichButton.tsx {8-9} showLineNumbers\nimport React from \"react\";\nimport { useTheme } from \"next-themes\";\nimport { themes } from \"../constants/theme\";\nimport { useHasMounted } from \"../hooks\";\n\nconst ThemeSwitchButton = () => {\n  const { theme, setTheme } = useTheme();\n  const hasMounted = useHasMounted();\n  if (!hasMounted || !theme) return null;\n\n  const currentIndex = Math.abs(themes.findIndex((t) => t.name === theme));\n  const currentTheme = themes[currentIndex];\n  const nextTheme = themes[(currentIndex + 1) % themes.length];\n\n  return (\n    <div>\n      <button\n        className=\"border inline-flex gap-2 justify-center w-32 items-center border-TextColor px-4 py-2 rounded-md\"\n        onClick={() => setTheme(nextTheme.name)}\n      >\n        {currentTheme.emoji}\n        <span>{currentTheme.name}</span>\n      </button>\n    </div>\n  );\n};\n\nexport default ThemeSwitchButton;\n```\n\nNotice we have a custom hook inside the component. We're using `useHasMounted` to make sure the component is mounted before we set the theme. The [doc](https://github.com/pacocoursey/next-themes) explains pretty well why we need this.\n\n> Because we cannot know the theme on the server, many of the values returned from useTheme will be undefined until mounted on the client. This means if you try to render UI based on the current theme before mounting on the client, you will see a hydration mismatch error.\n\nThen we need to know what the current theme is by using `useTheme` and accessing the `themes` properties defined earlier(title, name and emoji). We're using `findIndex` to find the index of the current theme in the `themes` array. Then we use `mod` to get the next theme. Once the button is clicked, we use `setTheme` to change the theme.\n\n### ThemeSwitchSelect Component\n\nI will use Headless UI Kit's `Select` component to create a dropdown select as it provide easy to use API and great accessibility. You can refer to the [Headless UI Kit](https://headlessui.dev/react/listbox) for more information.\n\n```tsx:components/ThemeSwtichSelect.tsx\nimport { useTheme } from \"next-themes\";\nimport React, { useEffect, useState } from \"react\";\nimport { Listbox } from \"@headlessui/react\";\nimport { CheckIcon } from \"@heroicons/react/solid\";\nimport { useHasMounted, useMultipleTheme } from \"../hooks\";\nimport { themes } from \"../constants/theme\";\n\nconst ThemeSwitchSelect = () => {\n  const { theme, setTheme } = useTheme();\n  const hasMounted = useHasMounted();\n  if (!hasMounted || !theme) return null;\n\n  const currentIndex = Math.abs(themes.findIndex((t) => t.name === theme));\n  const currentTheme = themes[currentIndex];\n\n  return (\n    <div className=\"w-40\">\n      <Listbox\n        value={theme}\n        onChange={(theme) => {\n          setTheme(theme);\n        }}\n      >\n        <div className=\"relative border border-TextColor rounded-lg\">\n          <Listbox.Button className=\"relative w-full cursor-default rounded-lg py-2 pl-3 pr-10 inline-flex gap-6 shadow-md\">\n            {currentTheme.emoji}\n            <span>{currentTheme.title}</span>\n          </Listbox.Button>\n          <Listbox.Options className=\"absolute max-h-60 w-full overflow-auto rounded-md py-1 text-base shadow-lg border-t-0 border rounded-t-none border-TextColor\">\n            {themes.map((theme) => (\n              <Listbox.Option\n                key={theme.name}\n                value={theme.name}\n                className={({ active }) =>\n                  `relative cursor-pointer select-none py-2 pl-10 pr-4 ${\n                    active ? \"opacity-100\" : \"opacity-80\"\n                  }`\n                }\n              >\n                {({ selected }) => (\n                  <div className=\"inline-flex gap-4\">\n                    {theme.emoji}\n                    <span\n                      className={`block truncate ${\n                        selected ? \"font-bold\" : \"font-normal\"\n                      }`}\n                    >\n                      {theme.title}\n                    </span>\n                    {selected ? (\n                      <span className=\"absolute inset-y-0 left-0 flex items-center pl-3\">\n                        <CheckIcon className=\"h-5 w-5\" aria-hidden=\"true\" />\n                      </span>\n                    ) : null}\n                  </div>\n                )}\n              </Listbox.Option>\n            ))}\n          </Listbox.Options>\n        </div>\n      </Listbox>\n    </div>\n  );\n};\n\nexport default ThemeSwitchSelect;\n```\n\nIn the select component, we no longer need to calculate `nextTheme` as `ListBox` contains all the themes we need to use.\n\nLet's render both components on the screen.\n\n```tsx:pages/index.tsx\nimport type { NextPage } from \"next\";\n\nimport ThemeSwitchSelect from \"../components/ThemeSwitchSelect\";\nimport ThemeSwitchButton from \"../components/ThemeSwitchButton\";\n\nconst Home: NextPage = () => {\n  return (\n    <div className=\"flex min-h-screen gap-6 flex-col items-center justify-center\">\n      <h1 className=\"text-3xl\">Theme Switch</h1>\n      <div className=\"flex gap-6\">\n        <ThemeSwitchSelect />\n        <ThemeSwitchButton />\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n\n```\n\n## Extract Logic\n\nYou may notice that we are reusing the same logic in both components, it's a good idea to use a custom hook to avoid duplicate code. We can create a custom hook called `useMultipleTheme` to handle multiple theme changes.\n\n```tsx:hooks/index.ts\nimport { useTheme } from \"next-themes\";\nimport { useEffect, useState } from \"react\";\nimport { ITheme } from \"../types\";\n\nexport const useMultipleTheme = (themes: ITheme[]) => {\n  const { theme, setTheme } = useTheme();\n  const currentIndex = Math.abs(themes.findIndex((t) => t.name === theme));\n  const currentTheme = themes[currentIndex];\n  const nextTheme = themes[(currentIndex + 1) % themes.length];\n\n  return {\n    theme,\n    setTheme,\n    currentTheme,\n    nextTheme,\n  };\n};\n\n```\n\nIn the component simply replace `useTheme` with `useMultipleTheme` and pass the `themes` array as an argument.\n\nThat's it for today, thanks for reading and happy coding!",
          "code": "var Component=(()=>{var mn=Object.create;var A=Object.defineProperty;var pn=Object.getOwnPropertyDescriptor;var hn=Object.getOwnPropertyNames;var bn=Object.getPrototypeOf,xn=Object.prototype.hasOwnProperty;var q=(d,n)=>()=>(n||d((n={exports:{}}).exports,n),n.exports),_n=(d,n)=>{for(var x in n)A(d,x,{get:n[x],enumerable:!0})},ge=(d,n,x,N)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let v of hn(n))!xn.call(d,v)&&v!==x&&A(d,v,{get:()=>n[v],enumerable:!(N=pn(n,v))||N.enumerable});return d};var vn=(d,n,x)=>(x=d!=null?mn(bn(d)):{},ge(n||!d||!d.__esModule?A(x,\"default\",{value:d,enumerable:!0}):x,d)),Nn=d=>ge(A({},\"__esModule\",{value:!0}),d);var we=q((En,Te)=>{Te.exports=React});var Ee=q(G=>{\"use strict\";(function(){\"use strict\";var d=we(),n=Symbol.for(\"react.element\"),x=Symbol.for(\"react.portal\"),N=Symbol.for(\"react.fragment\"),v=Symbol.for(\"react.strict_mode\"),X=Symbol.for(\"react.profiler\"),J=Symbol.for(\"react.provider\"),Z=Symbol.for(\"react.context\"),R=Symbol.for(\"react.forward_ref\"),D=Symbol.for(\"react.suspense\"),M=Symbol.for(\"react.suspense_list\"),C=Symbol.for(\"react.memo\"),F=Symbol.for(\"react.lazy\"),Ce=Symbol.for(\"react.offscreen\"),Q=Symbol.iterator,je=\"@@iterator\";function Pe(e){if(e===null||typeof e!=\"object\")return null;var t=Q&&e[Q]||e[je];return typeof t==\"function\"?t:null}var g=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function m(e){{for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];Oe(\"error\",e,i)}}function Oe(e,t,i){{var a=g.ReactDebugCurrentFrame,f=a.getStackAddendum();f!==\"\"&&(t+=\"%s\",i=i.concat([f]));var l=i.map(function(o){return String(o)});l.unshift(\"Warning: \"+t),Function.prototype.apply.call(console[e],console,l)}}var Ie=!1,Ae=!1,De=!1,Me=!1,Fe=!1,ee;ee=Symbol.for(\"react.module.reference\");function Le(e){return!!(typeof e==\"string\"||typeof e==\"function\"||e===N||e===X||Fe||e===v||e===D||e===M||Me||e===Ce||Ie||Ae||De||typeof e==\"object\"&&e!==null&&(e.$$typeof===F||e.$$typeof===C||e.$$typeof===J||e.$$typeof===Z||e.$$typeof===R||e.$$typeof===ee||e.getModuleId!==void 0))}function We(e,t,i){var a=e.displayName;if(a)return a;var f=t.displayName||t.name||\"\";return f!==\"\"?i+\"(\"+f+\")\":i}function ne(e){return e.displayName||\"Context\"}function _(e){if(e==null)return null;if(typeof e.tag==\"number\"&&m(\"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"),typeof e==\"function\")return e.displayName||e.name||null;if(typeof e==\"string\")return e;switch(e){case N:return\"Fragment\";case x:return\"Portal\";case X:return\"Profiler\";case v:return\"StrictMode\";case D:return\"Suspense\";case M:return\"SuspenseList\"}if(typeof e==\"object\")switch(e.$$typeof){case Z:var t=e;return ne(t)+\".Consumer\";case J:var i=e;return ne(i._context)+\".Provider\";case R:return We(e,e.render,\"ForwardRef\");case C:var a=e.displayName||null;return a!==null?a:_(e.type)||\"Memo\";case F:{var f=e,l=f._payload,o=f._init;try{return _(o(l))}catch{return null}}}return null}var y=Object.assign,E=0,te,re,ie,ae,se,oe,fe;function le(){}le.__reactDisabledLog=!0;function Ye(){{if(E===0){te=console.log,re=console.info,ie=console.warn,ae=console.error,se=console.group,oe=console.groupCollapsed,fe=console.groupEnd;var e={configurable:!0,enumerable:!0,value:le,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}E++}}function $e(){{if(E--,E===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:y({},e,{value:te}),info:y({},e,{value:re}),warn:y({},e,{value:ie}),error:y({},e,{value:ae}),group:y({},e,{value:se}),groupCollapsed:y({},e,{value:oe}),groupEnd:y({},e,{value:fe})})}E<0&&m(\"disabledDepth fell below zero. This is a bug in React. Please file an issue.\")}}var L=g.ReactCurrentDispatcher,W;function j(e,t,i){{if(W===void 0)try{throw Error()}catch(f){var a=f.stack.trim().match(/\\n( *(at )?)/);W=a&&a[1]||\"\"}return`\n`+W+e}}var Y=!1,P;{var Be=typeof WeakMap==\"function\"?WeakMap:Map;P=new Be}function de(e,t){if(!e||Y)return\"\";{var i=P.get(e);if(i!==void 0)return i}var a;Y=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var l;l=L.current,L.current=null,Ye();try{if(t){var o=function(){throw Error()};if(Object.defineProperty(o.prototype,\"props\",{set:function(){throw Error()}}),typeof Reflect==\"object\"&&Reflect.construct){try{Reflect.construct(o,[])}catch(h){a=h}Reflect.construct(e,[],o)}else{try{o.call()}catch(h){a=h}e.call(o.prototype)}}else{try{throw Error()}catch(h){a=h}e()}}catch(h){if(h&&a&&typeof h.stack==\"string\"){for(var s=h.stack.split(`\n`),p=a.stack.split(`\n`),c=s.length-1,u=p.length-1;c>=1&&u>=0&&s[c]!==p[u];)u--;for(;c>=1&&u>=0;c--,u--)if(s[c]!==p[u]){if(c!==1||u!==1)do if(c--,u--,u<0||s[c]!==p[u]){var b=`\n`+s[c].replace(\" at new \",\" at \");return e.displayName&&b.includes(\"<anonymous>\")&&(b=b.replace(\"<anonymous>\",e.displayName)),typeof e==\"function\"&&P.set(e,b),b}while(c>=1&&u>=0);break}}}finally{Y=!1,L.current=l,$e(),Error.prepareStackTrace=f}var w=e?e.displayName||e.name:\"\",k=w?j(w):\"\";return typeof e==\"function\"&&P.set(e,k),k}function Ve(e,t,i){return de(e,!1)}function He(e){var t=e.prototype;return!!(t&&t.isReactComponent)}function O(e,t,i){if(e==null)return\"\";if(typeof e==\"function\")return de(e,He(e));if(typeof e==\"string\")return j(e);switch(e){case D:return j(\"Suspense\");case M:return j(\"SuspenseList\")}if(typeof e==\"object\")switch(e.$$typeof){case R:return Ve(e.render);case C:return O(e.type,t,i);case F:{var a=e,f=a._payload,l=a._init;try{return O(l(f),t,i)}catch{}}}return\"\"}var U=Object.prototype.hasOwnProperty,ce={},ue=g.ReactDebugCurrentFrame;function I(e){if(e){var t=e._owner,i=O(e.type,e._source,t?t.type:null);ue.setExtraStackFrame(i)}else ue.setExtraStackFrame(null)}function Ke(e,t,i,a,f){{var l=Function.call.bind(U);for(var o in e)if(l(e,o)){var s=void 0;try{if(typeof e[o]!=\"function\"){var p=Error((a||\"React class\")+\": \"+i+\" type `\"+o+\"` is invalid; it must be a function, usually from the `prop-types` package, but received `\"+typeof e[o]+\"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.\");throw p.name=\"Invariant Violation\",p}s=e[o](t,o,a,i,null,\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\")}catch(c){s=c}s&&!(s instanceof Error)&&(I(f),m(\"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).\",a||\"React class\",i,o,typeof s),I(null)),s instanceof Error&&!(s.message in ce)&&(ce[s.message]=!0,I(f),m(\"Failed %s type: %s\",i,s.message),I(null))}}}var ze=Array.isArray;function $(e){return ze(e)}function qe(e){{var t=typeof Symbol==\"function\"&&Symbol.toStringTag,i=t&&e[Symbol.toStringTag]||e.constructor.name||\"Object\";return i}}function Ge(e){try{return me(e),!1}catch{return!0}}function me(e){return\"\"+e}function pe(e){if(Ge(e))return m(\"The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.\",qe(e)),me(e)}var S=g.ReactCurrentOwner,Xe={key:!0,ref:!0,__self:!0,__source:!0},he,be,B;B={};function Je(e){if(U.call(e,\"ref\")){var t=Object.getOwnPropertyDescriptor(e,\"ref\").get;if(t&&t.isReactWarning)return!1}return e.ref!==void 0}function Ze(e){if(U.call(e,\"key\")){var t=Object.getOwnPropertyDescriptor(e,\"key\").get;if(t&&t.isReactWarning)return!1}return e.key!==void 0}function Qe(e,t){if(typeof e.ref==\"string\"&&S.current&&t&&S.current.stateNode!==t){var i=_(S.current.type);B[i]||(m('Component \"%s\" contains the string ref \"%s\". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',_(S.current.type),e.ref),B[i]=!0)}}function en(e,t){{var i=function(){he||(he=!0,m(\"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",t))};i.isReactWarning=!0,Object.defineProperty(e,\"key\",{get:i,configurable:!0})}}function nn(e,t){{var i=function(){be||(be=!0,m(\"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",t))};i.isReactWarning=!0,Object.defineProperty(e,\"ref\",{get:i,configurable:!0})}}var tn=function(e,t,i,a,f,l,o){var s={$$typeof:n,type:e,key:t,ref:i,props:o,_owner:l};return s._store={},Object.defineProperty(s._store,\"validated\",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(s,\"_self\",{configurable:!1,enumerable:!1,writable:!1,value:a}),Object.defineProperty(s,\"_source\",{configurable:!1,enumerable:!1,writable:!1,value:f}),Object.freeze&&(Object.freeze(s.props),Object.freeze(s)),s};function rn(e,t,i,a,f){{var l,o={},s=null,p=null;i!==void 0&&(pe(i),s=\"\"+i),Ze(t)&&(pe(t.key),s=\"\"+t.key),Je(t)&&(p=t.ref,Qe(t,f));for(l in t)U.call(t,l)&&!Xe.hasOwnProperty(l)&&(o[l]=t[l]);if(e&&e.defaultProps){var c=e.defaultProps;for(l in c)o[l]===void 0&&(o[l]=c[l])}if(s||p){var u=typeof e==\"function\"?e.displayName||e.name||\"Unknown\":e;s&&en(o,u),p&&nn(o,u)}return tn(e,s,p,f,a,S.current,o)}}var V=g.ReactCurrentOwner,xe=g.ReactDebugCurrentFrame;function T(e){if(e){var t=e._owner,i=O(e.type,e._source,t?t.type:null);xe.setExtraStackFrame(i)}else xe.setExtraStackFrame(null)}var H;H=!1;function K(e){return typeof e==\"object\"&&e!==null&&e.$$typeof===n}function _e(){{if(V.current){var e=_(V.current.type);if(e)return`\n\nCheck the render method of \\``+e+\"`.\"}return\"\"}}function an(e){{if(e!==void 0){var t=e.fileName.replace(/^.*[\\\\\\/]/,\"\"),i=e.lineNumber;return`\n\nCheck your code at `+t+\":\"+i+\".\"}return\"\"}}var ve={};function sn(e){{var t=_e();if(!t){var i=typeof e==\"string\"?e:e.displayName||e.name;i&&(t=`\n\nCheck the top-level render call using <`+i+\">.\")}return t}}function Ne(e,t){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var i=sn(t);if(ve[i])return;ve[i]=!0;var a=\"\";e&&e._owner&&e._owner!==V.current&&(a=\" It was passed a child from \"+_(e._owner.type)+\".\"),T(e),m('Each child in a list should have a unique \"key\" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',i,a),T(null)}}function ye(e,t){{if(typeof e!=\"object\")return;if($(e))for(var i=0;i<e.length;i++){var a=e[i];K(a)&&Ne(a,t)}else if(K(e))e._store&&(e._store.validated=!0);else if(e){var f=Pe(e);if(typeof f==\"function\"&&f!==e.entries)for(var l=f.call(e),o;!(o=l.next()).done;)K(o.value)&&Ne(o.value,t)}}}function on(e){{var t=e.type;if(t==null||typeof t==\"string\")return;var i;if(typeof t==\"function\")i=t.propTypes;else if(typeof t==\"object\"&&(t.$$typeof===R||t.$$typeof===C))i=t.propTypes;else return;if(i){var a=_(t);Ke(i,e.props,\"prop\",a,e)}else if(t.PropTypes!==void 0&&!H){H=!0;var f=_(t);m(\"Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?\",f||\"Unknown\")}typeof t.getDefaultProps==\"function\"&&!t.getDefaultProps.isReactClassApproved&&m(\"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.\")}}function fn(e){{for(var t=Object.keys(e.props),i=0;i<t.length;i++){var a=t[i];if(a!==\"children\"&&a!==\"key\"){T(e),m(\"Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.\",a),T(null);break}}e.ref!==null&&(T(e),m(\"Invalid attribute `ref` supplied to `React.Fragment`.\"),T(null))}}var ke={};function ln(e,t,i,a,f,l){{var o=Le(e);if(!o){var s=\"\";(e===void 0||typeof e==\"object\"&&e!==null&&Object.keys(e).length===0)&&(s+=\" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\");var p=an(f);p?s+=p:s+=_e();var c;e===null?c=\"null\":$(e)?c=\"array\":e!==void 0&&e.$$typeof===n?(c=\"<\"+(_(e.type)||\"Unknown\")+\" />\",s=\" Did you accidentally export a JSX literal instead of a component?\"):c=typeof e,m(\"React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s\",c,s)}var u=rn(e,t,i,f,l);if(u==null)return u;if(o){var b=t.children;if(b!==void 0)if(a)if($(b)){for(var w=0;w<b.length;w++)ye(b[w],e);Object.freeze&&Object.freeze(b)}else m(\"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\");else ye(b,e)}if(U.call(t,\"key\")){var k=_(e),h=Object.keys(t).filter(function(un){return un!==\"key\"}),z=h.length>0?\"{key: someKey, \"+h.join(\": ..., \")+\": ...}\":\"{key: someKey}\";if(!ke[k+z]){var cn=h.length>0?\"{\"+h.join(\": ..., \")+\": ...}\":\"{}\";m(`A props object containing a \"key\" prop is being spread into JSX:\n  let props = %s;\n  <%s {...props} />\nReact keys must be passed directly to JSX without using spread:\n  let props = %s;\n  <%s key={someKey} {...props} />`,z,k,cn,k),ke[k+z]=!0}}return e===N?fn(u):on(u),u}}var dn=ln;G.Fragment=N,G.jsxDEV=dn})()});var Se=q((Sn,Ue)=>{\"use strict\";Ue.exports=Ee()});var Tn={};_n(Tn,{default:()=>gn,frontmatter:()=>yn});var r=vn(Se()),yn={type:\"Post\",title:\"Add Multiple Theme To Next.JS and Tailwind Project\",publishedAt:\"June 6, 2022\",isPublished:!0,description:\"Switch themes easily with few lines of code.\",toc:!0,category:\"web\",tags:[\"next.js\",\"tailwind\",\"theme\",\"react\"],image:\"/assets/images/add-multiple-theme-to-nextjs-project/bg.jpg\",thumbnail:{author:\"Keila H\\xF6tzel\",url:\"/assets/images/add-multiple-theme-to-nextjs-project/bg.jpg\",from:\"https://unsplash.com/@keilahoetzel\"}};function Re(d){let n=Object.assign({h2:\"h2\",p:\"p\",a:\"a\",code:\"code\",blockquote:\"blockquote\",h3:\"h3\",pre:\"pre\"},d.components);return(0,r.jsxDEV)(r.Fragment,{children:[(0,r.jsxDEV)(n.h2,{children:\"Intro\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:23,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:[\"Nowadays we have a lot of projects that need to be styled with Tailwind. In some cases, you may need to add multiple themes to your project. In today's article, I will show you how easy it is to do so with a few setups. The easiest way is to use \",(0,r.jsxDEV)(n.a,{href:\"https://github.com/pacocoursey/next-themes\",children:(0,r.jsxDEV)(n.code,{children:\"next-themes\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:25,columnNumber:248},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:25,columnNumber:247},this),\".\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:25,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.blockquote,{children:[`\n`,(0,r.jsxDEV)(n.p,{children:[\"\\u{1F331} Checkout \",(0,r.jsxDEV)(n.a,{href:\"https://theme-switch-iota.vercel.app/\",children:\"deployed version\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:27,columnNumber:15},this),\" to see the what final result looks like. Source code can be found \",(0,r.jsxDEV)(n.a,{href:\"https://github.com/patrick-xin/theme-switch\",children:\"here\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:27,columnNumber:139},this)]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:27,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:27,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.h2,{children:\"Crate a New Project\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:29,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:[\"Initialize a new Next.JS project with Tailwind by running \",(0,r.jsxDEV)(n.code,{children:\"npx create-next-app with-tailwind multiple-themes\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:31,columnNumber:59},this),\".\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:31,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.h3,{children:\"Add Theme Provider\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:33,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.pre,{children:(0,r.jsxDEV)(n.code,{className:\"language-tsx:pages/_app.tsx\",children:`import '../styles/globals.css'\nimport { ThemeProvider } from 'next-themes'\nimport type { AppProps } from 'next/app'\n\nfunction MyApp({ Component, pageProps }: AppProps) {\n  return (\n    <ThemeProvider enableSystem={false} disableTransitionOnChange>\n      <Component {...pageProps} />\n    </ThemeProvider>\n  )\n}\n\nexport default MyApp\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:35,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:35,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.h2,{children:\"Configure Tailwind CSS\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:51,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.h3,{children:\"Add CSS Variables\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:53,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:[\"We need to define CSS variables inside \",(0,r.jsxDEV)(n.code,{children:\"globals.css\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:55,columnNumber:40},this),\" file so that Tailwind knows how to access them.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:55,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.pre,{children:(0,r.jsxDEV)(n.code,{className:\"language-css:globals.css\",children:`@layer base {\n  :root {\n    --bg-color: #f4f4f0;\n    --text-color: #212121;\n  }\n\n  [data-theme='dark'] {\n    --bg-color: #212121;\n    --text-color: #f4f4f0;\n  }\n\n  [data-theme='yellow'] {\n    --bg-color: #ffc300;\n    --text-color: #f4f4f0;\n  }\n\n  [data-theme='purple'] {\n    --bg-color: #39009e;\n    --text-color: #15b2fb;\n  }\n\n  body {\n    @apply relative text-pageText bg-pageBG;\n  }\n}\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:57,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:57,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:[\"These are arbitrary CSS variables that I created, feel free to change them based on your taste. Don't forget to apply those variables to the \",(0,r.jsxDEV)(n.code,{children:\"body\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:85,columnNumber:142},this),\" element.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:85,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.h3,{children:\"Add CSS Variables to Tailwind\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:87,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:[\"Add the highlighted lines to your \",(0,r.jsxDEV)(n.code,{children:\"tailwind.config.js\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:89,columnNumber:35},this),\" file.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:89,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.pre,{children:(0,r.jsxDEV)(n.code,{className:\"language-js:tailwind.config.js\",children:`module.exports = {\n  content: [\n    \"./pages/**/*.{js,ts,jsx,tsx}\",\n    \"./components/**/*.{js,ts,jsx,tsx}\",\n  ],\n  theme: {\n    extend: {\n      colors: {\n        BackgroundColor: \"var(--bg-color)\",\n        TextColor: \"var(--text-color)\",\n      },\n    },\n  },\n  plugins: [],\n};\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:91,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:91,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:\"With current configuration, we are ready to change themes.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:109,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.h2,{children:\"Define Theme Object\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:111,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:\"In order to switch between themes, we need to create a theme object which contains the themes that our website can use.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:113,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.pre,{children:(0,r.jsxDEV)(n.code,{className:\"language-tsx:constants/theme.tsx\",children:`export const themes: ITheme[] = [\n  {\n    title: \"Light\",\n    name: \"light\",\n    emoji: <span>\\u{1F31E}</span>,\n  },\n  {\n    title: \"Dark\",\n    name: \"dark\",\n    emoji: <span>\\u{1F319}</span>,\n  },\n  {\n    title: \"Yellow\",\n    name: \"yellow\",\n    emoji: <span>\\u{1F33C}</span>,\n  },\n  {\n    title: \"Purple\",\n    name: \"purple\",\n    emoji: <span>\\u{1F984}</span>,\n  },\n];\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:115,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:115,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:[\"As I'm using TypeScript, I've also created a \",(0,r.jsxDEV)(n.code,{children:\"ITheme interface\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:140,columnNumber:46},this),\". If you are unfamiliar with TypeScript, you can skip this type definition.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:140,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.pre,{children:(0,r.jsxDEV)(n.code,{className:\"language-ts:types/theme.ts\",children:`export type ThemeName = \"light\" | \"dark\" | \"yellow\" | \"purple\";\nexport type ThemeTitle = Capitalize<ThemeName>;\n\nexport interface ITheme {\n  title: ThemeTitle;\n  name: ThemeName;\n  emoji: React.ReactNode;\n}\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:142,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:142,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:[\"For more type safty, we're using \",(0,r.jsxDEV)(n.a,{href:\"https://www.typescriptlang.org/docs/handbook/2/template-literal-types.html#capitalizestringtype\",children:(0,r.jsxDEV)(n.code,{children:\"Template Literal Types\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:153,columnNumber:35},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:153,columnNumber:34},this),\" to define the type of the \",(0,r.jsxDEV)(n.code,{children:\"title\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:153,columnNumber:184},this),\" and \",(0,r.jsxDEV)(n.code,{children:\"name\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:153,columnNumber:196},this),\" properties. \",(0,r.jsxDEV)(n.code,{children:\"title\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:153,columnNumber:215},this),\" will be shown in the UI and \",(0,r.jsxDEV)(n.code,{children:\"name\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:153,columnNumber:251},this),\" will be used to tell \",(0,r.jsxDEV)(n.code,{children:\"next-themes\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:153,columnNumber:279},this),\" what current theme we are using.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:153,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.h2,{children:\"Create ThemeSwitch Component\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:155,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:\"There are various ways create a switcher, you can either use a dropdown select or a button. I will create both just for fun.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:157,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.h3,{children:\"ThemeSwtichButton Component\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:159,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:\"Let's create a switch button first.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:161,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.pre,{children:(0,r.jsxDEV)(n.code,{className:\"language-tsx:components/ThemeSwtichButton.tsx\",children:`import React from \"react\";\nimport { useTheme } from \"next-themes\";\nimport { themes } from \"../constants/theme\";\nimport { useHasMounted } from \"../hooks\";\n\nconst ThemeSwitchButton = () => {\n  const { theme, setTheme } = useTheme();\n  const hasMounted = useHasMounted();\n  if (!hasMounted || !theme) return null;\n\n  const currentIndex = Math.abs(themes.findIndex((t) => t.name === theme));\n  const currentTheme = themes[currentIndex];\n  const nextTheme = themes[(currentIndex + 1) % themes.length];\n\n  return (\n    <div>\n      <button\n        className=\"border inline-flex gap-2 justify-center w-32 items-center border-TextColor px-4 py-2 rounded-md\"\n        onClick={() => setTheme(nextTheme.name)}\n      >\n        {currentTheme.emoji}\n        <span>{currentTheme.name}</span>\n      </button>\n    </div>\n  );\n};\n\nexport default ThemeSwitchButton;\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:163,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:163,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:[\"Notice we have a custom hook inside the component. We're using \",(0,r.jsxDEV)(n.code,{children:\"useHasMounted\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:194,columnNumber:64},this),\" to make sure the component is mounted before we set the theme. The \",(0,r.jsxDEV)(n.a,{href:\"https://github.com/pacocoursey/next-themes\",children:\"doc\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:194,columnNumber:147},this),\" explains pretty well why we need this.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:194,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.blockquote,{children:[`\n`,(0,r.jsxDEV)(n.p,{children:\"Because we cannot know the theme on the server, many of the values returned from useTheme will be undefined until mounted on the client. This means if you try to render UI based on the current theme before mounting on the client, you will see a hydration mismatch error.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:196,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:196,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:[\"Then we need to know what the current theme is by using \",(0,r.jsxDEV)(n.code,{children:\"useTheme\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:198,columnNumber:57},this),\" and accessing the \",(0,r.jsxDEV)(n.code,{children:\"themes\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:198,columnNumber:86},this),\" properties defined earlier(title, name and emoji). We're using \",(0,r.jsxDEV)(n.code,{children:\"findIndex\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:198,columnNumber:158},this),\" to find the index of the current theme in the \",(0,r.jsxDEV)(n.code,{children:\"themes\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:198,columnNumber:216},this),\" array. Then we use \",(0,r.jsxDEV)(n.code,{children:\"mod\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:198,columnNumber:244},this),\" to get the next theme. Once the button is clicked, we use \",(0,r.jsxDEV)(n.code,{children:\"setTheme\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:198,columnNumber:308},this),\" to change the theme.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:198,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.h3,{children:\"ThemeSwitchSelect Component\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:200,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:[\"I will use Headless UI Kit's \",(0,r.jsxDEV)(n.code,{children:\"Select\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:202,columnNumber:30},this),\" component to create a dropdown select as it provide easy to use API and great accessibility. You can refer to the \",(0,r.jsxDEV)(n.a,{href:\"https://headlessui.dev/react/listbox\",children:\"Headless UI Kit\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:202,columnNumber:153},this),\" for more information.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:202,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.pre,{children:(0,r.jsxDEV)(n.code,{className:\"language-tsx:components/ThemeSwtichSelect.tsx\",children:`import { useTheme } from \"next-themes\";\nimport React, { useEffect, useState } from \"react\";\nimport { Listbox } from \"@headlessui/react\";\nimport { CheckIcon } from \"@heroicons/react/solid\";\nimport { useHasMounted, useMultipleTheme } from \"../hooks\";\nimport { themes } from \"../constants/theme\";\n\nconst ThemeSwitchSelect = () => {\n  const { theme, setTheme } = useTheme();\n  const hasMounted = useHasMounted();\n  if (!hasMounted || !theme) return null;\n\n  const currentIndex = Math.abs(themes.findIndex((t) => t.name === theme));\n  const currentTheme = themes[currentIndex];\n\n  return (\n    <div className=\"w-40\">\n      <Listbox\n        value={theme}\n        onChange={(theme) => {\n          setTheme(theme);\n        }}\n      >\n        <div className=\"relative border border-TextColor rounded-lg\">\n          <Listbox.Button className=\"relative w-full cursor-default rounded-lg py-2 pl-3 pr-10 inline-flex gap-6 shadow-md\">\n            {currentTheme.emoji}\n            <span>{currentTheme.title}</span>\n          </Listbox.Button>\n          <Listbox.Options className=\"absolute max-h-60 w-full overflow-auto rounded-md py-1 text-base shadow-lg border-t-0 border rounded-t-none border-TextColor\">\n            {themes.map((theme) => (\n              <Listbox.Option\n                key={theme.name}\n                value={theme.name}\n                className={({ active }) =>\n                  \\`relative cursor-pointer select-none py-2 pl-10 pr-4 \\${\n                    active ? \"opacity-100\" : \"opacity-80\"\n                  }\\`\n                }\n              >\n                {({ selected }) => (\n                  <div className=\"inline-flex gap-4\">\n                    {theme.emoji}\n                    <span\n                      className={\\`block truncate \\${\n                        selected ? \"font-bold\" : \"font-normal\"\n                      }\\`}\n                    >\n                      {theme.title}\n                    </span>\n                    {selected ? (\n                      <span className=\"absolute inset-y-0 left-0 flex items-center pl-3\">\n                        <CheckIcon className=\"h-5 w-5\" aria-hidden=\"true\" />\n                      </span>\n                    ) : null}\n                  </div>\n                )}\n              </Listbox.Option>\n            ))}\n          </Listbox.Options>\n        </div>\n      </Listbox>\n    </div>\n  );\n};\n\nexport default ThemeSwitchSelect;\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:204,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:204,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:[\"In the select component, we no longer need to calculate \",(0,r.jsxDEV)(n.code,{children:\"nextTheme\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:273,columnNumber:57},this),\" as \",(0,r.jsxDEV)(n.code,{children:\"ListBox\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:273,columnNumber:72},this),\" contains all the themes we need to use.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:273,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:\"Let's render both components on the screen.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:275,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.pre,{children:(0,r.jsxDEV)(n.code,{className:\"language-tsx:pages/index.tsx\",children:`import type { NextPage } from \"next\";\n\nimport ThemeSwitchSelect from \"../components/ThemeSwitchSelect\";\nimport ThemeSwitchButton from \"../components/ThemeSwitchButton\";\n\nconst Home: NextPage = () => {\n  return (\n    <div className=\"flex min-h-screen gap-6 flex-col items-center justify-center\">\n      <h1 className=\"text-3xl\">Theme Switch</h1>\n      <div className=\"flex gap-6\">\n        <ThemeSwitchSelect />\n        <ThemeSwitchButton />\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:277,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:277,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.h2,{children:\"Extract Logic\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:299,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:[\"You may notice that we are reusing the same logic in both components, it's a good idea to use a custom hook to avoid duplicate code. We can create a custom hook called \",(0,r.jsxDEV)(n.code,{children:\"useMultipleTheme\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:301,columnNumber:169},this),\" to handle multiple theme changes.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:301,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.pre,{children:(0,r.jsxDEV)(n.code,{className:\"language-tsx:hooks/index.ts\",children:`import { useTheme } from \"next-themes\";\nimport { useEffect, useState } from \"react\";\nimport { ITheme } from \"../types\";\n\nexport const useMultipleTheme = (themes: ITheme[]) => {\n  const { theme, setTheme } = useTheme();\n  const currentIndex = Math.abs(themes.findIndex((t) => t.name === theme));\n  const currentTheme = themes[currentIndex];\n  const nextTheme = themes[(currentIndex + 1) % themes.length];\n\n  return {\n    theme,\n    setTheme,\n    currentTheme,\n    nextTheme,\n  };\n};\n\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:303,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:303,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:[\"In the component simply replace \",(0,r.jsxDEV)(n.code,{children:\"useTheme\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:324,columnNumber:33},this),\" with \",(0,r.jsxDEV)(n.code,{children:\"useMultipleTheme\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:324,columnNumber:49},this),\" and pass the \",(0,r.jsxDEV)(n.code,{children:\"themes\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:324,columnNumber:81},this),\" array as an argument.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:324,columnNumber:1},this),`\n`,(0,r.jsxDEV)(n.p,{children:\"That's it for today, thanks for reading and happy coding!\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:326,columnNumber:1},this)]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\",lineNumber:1,columnNumber:1},this)}function kn(d={}){let{wrapper:n}=d.components||{};return n?(0,r.jsxDEV)(n,Object.assign({},d,{children:(0,r.jsxDEV)(Re,d,void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\"},this)}),void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-fd3f5a78-ff11-4f16-9843-383f163697ba.mdx\"},this):Re(d)}var gn=kn;return Nn(Tn);})();\n/*! Bundled license information:\n\nreact/cjs/react-jsx-dev-runtime.development.js:\n  (**\n   * @license React\n   * react-jsx-dev-runtime.development.js\n   *\n   * Copyright (c) Facebook, Inc. and its affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *)\n*/\n;return Component;"
        },
        "_id": "add-multiple-theme-to-nextjs-project.mdx",
        "_raw": {
          "sourceFilePath": "add-multiple-theme-to-nextjs-project.mdx",
          "sourceFileName": "add-multiple-theme-to-nextjs-project.mdx",
          "sourceFileDir": ".",
          "contentType": "mdx",
          "flattenedPath": "add-multiple-theme-to-nextjs-project"
        },
        "type": "Post",
        "readingTime": {
          "text": "6 min read",
          "minutes": 5.82,
          "time": 349200,
          "words": 1164
        },
        "wordCount": 1165,
        "slug": "add-multiple-theme-to-nextjs-project",
        "url": "/post/add-multiple-theme-to-nextjs-project"
      },
      "documentHash": "1720247163572",
      "hasWarnings": false,
      "documentTypeName": "Post"
    },
    "build-a-toast-component-with-react-from-scrach.mdx": {
      "document": {
        "title": "Build A Toast Component With React From Scratch",
        "publishedAt": "Feb 1, 2022",
        "description": "Create a react toast with tailwind, framer motion and zustand by yourself.",
        "image": "/assets/images/build-a-toast-component-with-react-from-scrach/bg.avif",
        "isPublished": true,
        "toc": true,
        "thumbnail": {
          "author": "brandi-redd",
          "url": "/assets/images/build-a-toast-component-with-react-from-scrach/bg.avif",
          "from": "https://unsplash.com/@brandi1"
        },
        "category": "web",
        "tags": [
          "react",
          "tailwind",
          "framer motion",
          "zustand",
          "typescript"
        ],
        "body": {
          "raw": "\n## What is toast?\n\nA toast is a common react component we see on the website. It can\nbe used as a notification to display messages for the users. We may somewhat\nuse libraries like [React Toastify](https://fkhadra.github.io/react-toastify/introduction) and [React Hot Toast](https://react-hot-toast.com/).\nBut today in this article we will build one by ourselves. If you're interested, please keep reading.\n\n> ✨ This tutorial assumes that you have a basic understanding of React.\n>\n> ✨ You may take a look at the documentation of [Framer Motion](https://www.framer.com/motion/), [Zustand](https://github.com/pmndrs/zustand) if you are not familiar with them.\n\nI've used the same toast component on this website. To see what the final result looks like, you can click\nthese buttons: <ToastForPost/> Or\nyou can leave a comment in the comment section, you will see either a success message or a error message pops up on the right corner of the screen. Any comments or feedback are appreciated. 🙏 I've also made a repo in the [github](https://github.com/patrick-xin/react-toast-tailwind-framer-motion), feel free to check it out.\n\n## Tools We're Gonna Use\n\n- A Typescript React app. I will use NextJS. You can run `yarn create-next-app --example with-tailwindcss with-tailwindcss-app` in the command line. This repo has been updated using Typescript by default.\n- Animation Libary - [Framer Motion](https://www.framer.com/motion/)\n- Styling - [TailwindCSS](https://tailwindcss.com/)\n- State Managment [Zustand](https://github.com/pmndrs/zustand)\n\nAfter initializing the app, run `yarn add framer-motion zustand` to add _Framer Motion_ and _Zustand_ packages to our project.\n\nYou can also use other state management libraries like _Redux_ or _Context API_. The idea is the same: we don't have to pass props to the child components and avoid 😒*Prop Drilling*. If you are not sure what _Prop Drilling_ is, check this [article](https://kentcdodds.com/blog/prop-drilling) written by Kent C. Dodds. Personally, I think he gave the best explanation of it.\n\nEnough talking, let's get started!\n\n## Define Toast State\n\nlet's create a folder called _store_ inside the root directory first. Then inside it create `toast-store.ts`\n\n```ts:store/toast-store.ts\nimport create from \"zustand\";\n\nexport const useToastStore = create((set) => ({\n  isToastOpen: false,\n  closeToast: () => set(() => ({ isToastOpen: false })),\n  message: \"\",\n}));\n```\n\nQuickly you wll notice the error on `set` function, simply ignore it, we will fix it later when we define types of the store.\n\nThe basic state of our toast store is if the toast opens or not. We will use the flag `isToastOpen` to control the state of the toast. Initially, we set it `false`. The toast will open once its value is set to `true`. We will also need a function to close the toast, which means we set `isToastOpen` back to its default state. We will also need the actual _message_ to display.\n\nYou may notice that we don't have a function to open it. Yes we can change `closeToast` function to `toggleToast` and make it toggle current `isToastOpen` state.\nBut bear with me, I have a better option. Let's continue.\n\nWe will add more properties to our current toast state.\n\n```ts:store/toast-store.ts {7-9}\nimport create from \"zustand\";\n\nexport const useToastStore = create((set) => ({\n  isToastOpen: false,\n  closeToast: () => set(() => ({ isToastOpen: false })),\n  message: \"\",\n  toastType: \"success\",\n  position: \"bottomCenter\",\n  direction: \"fadeUp\",\n}));\n```\n\n`toastType` is the option that we can decide based on what we need, it could be one of ✅success, ❌error, or ⛔️warning, but it is not limited, we can display all kinds of toast if we want!\n\nWe can also display the toast in various positions and decide how it pops up with the `position` and `direction` properties.\n\nNow let's add the function that actually will open the toast.\n\n```ts:store/toast-store.ts {10-35}\nimport create from \"zustand\";\n\nexport const useToastStore = create((set) => ({\n  isToastOpen: false,\n  closeToast: () => set(() => ({ isToastOpen: false })),\n  message: \"\",\n  toastType: \"success\",\n  position: \"bottomCenter\",\n  direction: \"fadeUp\",\n  toast: {\n    success: (message, position?, direction?) =>\n      set((state) => ({\n        isToastOpen: true,\n        toastType: 'success',\n        message,\n        position: position ?? state.position,\n        direction: direction ?? state.direction,\n      })),\n    error: (message, position?, direction?) =>\n      set((state) => ({\n        isToastOpen: true,\n        toastType: \"error\",\n        message,\n        position: position ?? state.position,\n        direction: direction ?? state.direction,\n      })),\n    warning: (message, position?, direction?) =>\n      set((state) => ({\n        isToastOpen: true,\n        toastType: \"warning\",\n        message,\n        position: position ?? state.position,\n        direction: direction ?? state.direction,\n      })),\n  },\n}));\n```\n\n`toast` is an object that has all the methods we can use later, the syntax will be like `toast. success('success message', 'bottomCenter', 'fadeUp')`. The toast component will be different if we pass different arguments. Notice the `set` function can take a state argument that we can access the current state. Each function inside the toast object\n\n> ❓ Question mark after the parameters means this argument is optional, if we don't pass it, it will be `undefined`.\n>\n> ❓❓ Double question mark means if `position` is `undefined` it will fall back to default state.\n\n### Add Types\n\n```ts:store/toast-store.ts\ntype Position = \"topCenter\" | \"bottomCenter\" | \"topRight\" | \"bottomRight\";\ntype ToastType = \"success\" | \"error\" | \"warning\";\ntype Direction = \"fadeUp\" | \"fadeLeft\";\ntype ToastState = {\n  isToastOpen: boolean;\n  closeToast: () => void;\n  message: string;\n  toastType: ToastType;\n  position: Position;\n  direction: Direction;\n  toast: {\n    success: (\n      message: string,\n      position?: Position,\n      direction?: Direction\n    ) => void;\n    error: (message: string, position?: Position, direction?: Direction) => void;\n    warning: (\n      message: string,\n      position?: Position,\n      direction?: Direction\n    ) => void;\n  };\n};\n```\n\nThen we can add `type ToastState` to the `create` function.\n\n```diff:store/toast-store.ts\n\n++ const useToastStore = create<ToastState>((set) => ({\n  isToastOpen: false,\n  closeToast: () => set(() => ({ isToastOpen: false })),\n  message: \"\",\n  ...\n}));\n```\n\nNow the error is gone and Typescript will help us avoid making typos and prevent us pass wrong types of arguments. It's simple, isn't it? That's it for the store. We are halfway there! We can start building the toast component now.\n\n## Make Toast Component\n\n```tsx:components/toast.tsx\nconst Toast = ()=>{\n    return (\n        <div className='fixed top-0 right-0 flex items-center justify-around rounded h-12 w-48'>\n            <button className=\"px-1 py-2\">X</button>\n            This is Toast Component\n        </div>\n    )\n}\nexport default Toast;\n```\n\n### Render Toast Component On Screen\n\n```tsx:pages/index.tsx\nimport Toast from \"../components/toast\";\n\nconst HomePage = ()=>{\n    return (\n        <div>\n            <Toast/>\n        </div>\n    )\n}\nexport default HomePage\n```\n\nThe Toast component should be on the right top of the screen. We haven't styled it yet. It's probably the uglies toast you've ever seen. Let's use the store we just built to take full control of it.\n\n### Add Animation, Connect Store\n\n```tsx:components/toast.tsx\nimport {motion, AnimatePresence} from 'framer-motion'\nimport {useToastStore} from '../store/toast-store'\n\nconst Toast = ()=>{\n    const { isToastOpen, message, toastType, position, direction, closeToast } =\n    useToastStore();\n\n    return (\n        <AnimatePresence>\n            {isToastOpen && (\n                <motion.div className='fixed top-0 right-0 flex items-center justify-around text-white rounded h-12 w-48'>\n                    {message}\n                    <button className=\"px-1 py-2\">X</button>\n            </motion.div>\n            )}\n        </AnimatePresence>\n    )\n}\nexport default Toast;\n```\n\nToast Component will always be hidden until we set `isToastOpen` to `true` inside the store. As you can see, we don't have to pass any props to the component itself, the _show/hide_ state is completely managed by our store.\n\n> [AnimatePresence](https://www.framer.com/docs/animate-presence/) allows components to animate out when they're removed from the React tree.\n\nIt is perfect to animate the component when it's mounting and unmounting. Also, we can remove `This is Toast Component` inside the toast and replace it with `message` that we pass through.\n\nNow it's time to add some configurations to it to make it beautiful and functional.\n\n### Wrire Configrations\n\n```tsx:components/toast.tsx\n\n const toastTypes = {\n    success: 'bg-green-500',\n    error: 'bg-red-500',\n    warning: 'bg-yellow-500'\n}\n\n const positions = {\n    topCenter: 'top-0 mx-auto',\n    topRight: 'top-0 right-0',\n    bottomCenter: 'bottom-0 mx-auto',\n    bottomRight: 'bottom-0 right-0'\n}\n\n const variants = {\n    fadeLeft:{\n        initial:{\n            opacity:0,\n            x:'100%'\n        },\n\n        animate:{\n            opacity:1,\n            x:0\n        },\n        exit:{\n            opacity:0,\n            x:'100%'\n        }\n    },\n    fadeUp:{\n        initial:{\n            opacity:0,\n            y:12\n        },\n        animate:{\n            opacity:1,\n            y:0\n        },\n        exit:{\n            opacity:0,\n            y:'-100%'\n        }\n    } }\n```\n\n### Add Configrations To Toast Component\n\nNow we are ready to add config to the toast component. We will define configurations as objects so that we can easily combine them with the options in our toast store and use `template literal` inside Tailwind classNames.\n\n```tsx:components/toast.tsx {8-13}\nconst Toast = () => {\n  const { isToastOpen, message, toastType, position, direction, closeToast } =\n    useToastStore();\n\n  return (\n    <AnimatePresence>\n      {isToastOpen && (\n        <motion.div\n          variants={variants[direction]}\n          initial=\"initial\"\n          animate=\"animate\"\n          exit=\"exit\"\n          className={`${positions[position]} ${toastTypes[toastType]} fixed flex items-center justify-around rounded h-12 w-48`}\n        >\n          {message}\n          <button className=\"px-1 py-2\" onClick={closeToast}>\n            X\n          </button>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n};\nexport default Toast;\n```\n\n> Dont' forget to remove `top-0 right-0` from the `className`, otherwise it will overwrite the position we passed in.\n\nIf you are confused by the props we pass inside `motion.div` like `variants`, `initial`, `animate`, `exit`,\nhave a look at [this](https://www.framer.com/docs/examples/#variants) as reference.\n\nWe're almost done! I will be so glad if you are still here. Finally, it's time to test if it works. Let's give it a shot!\n\n### Open Toast\n\n```tsx:pages/index.tsx {7, 9-19}\nimport Toast from \"../components/toast\";\nimport { useToastStore } from \"../store/toast-store\";\n\nconst HomePage = () => {\n  const { toast } = useToastStore();\n  return (\n    <div className=\"flex justify-center items-center h-screen\">\n      <Toast />\n      <div className=\"flex gap-4\">\n        <button\n          className=\"bg-green-500 px-1 py-2 rounded\"\n          onClick={() =>\n            toast.success(\"Success message\", \"bottomRight\", \"fadeLeft\")\n          }\n        >\n          success button\n        </button>\n      </div>\n    </div>\n  );\n};\nexport default HomePage\n```\n\nIf everything works fine, you should see the success toast will pop up on the right corner of the screen after the button is clicked. With our current setup, we can control where we can close the toast. We can create a close button inside `index.tsx`.\n\n### Close Toast\n\n```tsx:pages/index.tsx {5, 18-20}\nimport Toast from \"../components/toast\";\nimport { useToastStore } from \"../store/toast-store\";\n\nconst HomePage = () => {\n  const { toast, closeToast } = useToastStore();\n  return (\n    <div className=\"flex justify-center items-center h-screen\">\n      <Toast />\n      <div className=\"flex gap-4\">\n        <button\n          className=\"bg-green-500 px-1 py-2 rounded\"\n          onClick={() =>\n            toast.success(\"Success message\", \"bottomRight\", \"fadeLeft\")\n          }\n        >\n          success button\n        </button>\n        <button className=\"bg-cyan-500 px-1 py-2 rounded\" onClick={closeToast}>\n          close\n        </button>\n      </div>\n    </div>\n  );\n};\n```\n\n### Display Different Toasts\n\nLet's test all the toast with different positions and types.\n\n```tsx:pages/index.tsx {18-31}\nimport Toast from \"../components/toast\";\nimport { useToastStore } from \"../store/toast-store\";\n\nconst HomePage = () => {\n  const { toast, closeToast } = useToastStore();\n  return (\n    <div className=\"flex justify-center items-center h-screen\">\n      <Toast />\n      <div className=\"flex gap-4\">\n        <button\n          className=\"bg-green-500 px-1 py-2 rounded\"\n          onClick={() =>\n            toast.success(\"Success message\", \"topCenter\", \"fadeUp\")\n          }\n        >\n          success button\n        </button>\n        <button\n          className=\"bg-red-500 px-1 py-2 rounded\"\n          onClick={() => toast.error(\"Error message\", \"topRight\", \"fadeLeft\")}\n        >\n          error button\n        </button>\n        <button\n          className=\"bg-yellow-500 px-1 py-2 rounded\"\n          onClick={() =>\n            toast.warning(\"Warning message\", \"bottomCenter\", \"fadeUp\")\n          }\n        >\n          warning button\n        </button>\n        <button className=\"bg-cyan-500 px-1 py-2 rounded\" onClick={closeToast}>\n          close\n        </button>\n      </div>\n    </div>\n  );\n};\n```\n\nThere is a small issue. If you keep clicking buttons without clicking the close button, you will notice that sometimes the position like `fadeLeft` doesn't work, the animation is also clunky. That's because the toast component is never unmounted, so the `exit` property on the `motion.div` is never animated.\n\n> In React, changing a component's key makes React treat it as an entirely new component.\n\nTo fix it, simply add a prop `key={toastType}` inside `motion.div` component. Be careful that the `key` has to be unique! This is similar when we map an array of components, I'm sure you have seen the error in the console that says `each component must have a unique key property. In our case, we keep changing `toastType` so it has no problems.\n\n```diff:components/toast.tsx\n  ...\n++<motion.div key={toastType}\n  ...\n```\n\nCongrats! 👏 👏 We just finished building a basic yet fully functional toast. This is just the fundamental setup, you can be as creative as you can, adding features like removing it automatically using `setTimeOut` inside `useEffect` hook, displaying multiple toasts at the same time, etc... Feel free to fork the [repo](https://github.com/patrick-xin/react-toast-tailwind-framer-motion) and add as many features as you want!\n\n## What Can Be Improved?\n\nThanks again for following along, below are just some personal thoughts as a web developer. I always like to think about what I can improve after writing the codes. Are my current codes easy to add more new features?\n\n### Toast Object In Store\n\nWe have three functions in the `toast` object, each of them is receiving three arguments, only `message` is required. What if we want to omit the second `position` argument but pass the `direction` argument? We have to do something this:`toast.success('success message', undefined, 'topCenter')`, or add a different icon to a different kind of toast? We can keep `message` as it is and change the last two parameters into an options object! We can make each property inside optional so we don't have to worry if we don't pass anything. It may look like this `toast.success('success message', {position:'topRight', direction:'fadeUp', icon:<CheckIcon/>})`\n\n### Render Toast in Portal\n\n> What is Portal? Portals provide a first-class way to render children into a DOM node that exists outside the DOM hierarchy of the parent component.\n>\n> When to use Portal? A typical use case for portals is when a parent component has an overflow: hidden or z-index style, but you need the child to visually “break out” of its container. For example, dialogs, hovercards, and tooltips.\n\nAs you can see, our toast can be considered as _dialogs_, rendering it outside the main component tree can improve the performance of our apps.\n\n### Accessibility\n\nWith the current setup, there is no way we can close the toast using the keyboard. We can make the close button inside the toast autofocus when it mounts, giving users a better experience. In my current website, I'm using [Headless UI](https://headlessui.dev/) to handle these problems.\n\nThat's it for this post. Hope you enjoy reading it. If you have any questions or thoughts feel free to leave a comment below. Cheers!\n",
          "code": "var Component=(()=>{var fn=Object.create;var D=Object.defineProperty;var pn=Object.getOwnPropertyDescriptor;var bn=Object.getOwnPropertyNames;var xn=Object.getPrototypeOf,_n=Object.prototype.hasOwnProperty;var X=(c,n)=>()=>(n||c((n={exports:{}}).exports,n),n.exports),hn=(c,n)=>{for(var f in n)D(c,f,{get:n[f],enumerable:!0})},ge=(c,n,f,k)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let N of bn(n))!_n.call(c,N)&&N!==f&&D(c,N,{get:()=>n[N],enumerable:!(k=pn(n,N))||k.enumerable});return c};var Nn=(c,n,f)=>(f=c!=null?fn(xn(c)):{},ge(n||!c||!c.__esModule?D(f,\"default\",{value:c,enumerable:!0}):f,c)),kn=c=>ge(D({},\"__esModule\",{value:!0}),c);var Te=X((En,we)=>{we.exports=React});var Ue=X(K=>{\"use strict\";(function(){\"use strict\";var c=Te(),n=Symbol.for(\"react.element\"),f=Symbol.for(\"react.portal\"),k=Symbol.for(\"react.fragment\"),N=Symbol.for(\"react.strict_mode\"),G=Symbol.for(\"react.profiler\"),J=Symbol.for(\"react.provider\"),Z=Symbol.for(\"react.context\"),C=Symbol.for(\"react.forward_ref\"),I=Symbol.for(\"react.suspense\"),W=Symbol.for(\"react.suspense_list\"),O=Symbol.for(\"react.memo\"),F=Symbol.for(\"react.lazy\"),Oe=Symbol.for(\"react.offscreen\"),Q=Symbol.iterator,Se=\"@@iterator\";function Pe(e){if(e===null||typeof e!=\"object\")return null;var i=Q&&e[Q]||e[Se];return typeof i==\"function\"?i:null}var g=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function p(e){{for(var i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];je(\"error\",e,r)}}function je(e,i,r){{var s=g.ReactDebugCurrentFrame,d=s.getStackAddendum();d!==\"\"&&(i+=\"%s\",r=r.concat([d]));var l=r.map(function(o){return String(o)});l.unshift(\"Warning: \"+i),Function.prototype.apply.call(console[e],console,l)}}var Ae=!1,De=!1,Ie=!1,We=!1,Fe=!1,ee;ee=Symbol.for(\"react.module.reference\");function Le(e){return!!(typeof e==\"string\"||typeof e==\"function\"||e===k||e===G||Fe||e===N||e===I||e===W||We||e===Oe||Ae||De||Ie||typeof e==\"object\"&&e!==null&&(e.$$typeof===F||e.$$typeof===O||e.$$typeof===J||e.$$typeof===Z||e.$$typeof===C||e.$$typeof===ee||e.getModuleId!==void 0))}function Me(e,i,r){var s=e.displayName;if(s)return s;var d=i.displayName||i.name||\"\";return d!==\"\"?r+\"(\"+d+\")\":r}function ne(e){return e.displayName||\"Context\"}function h(e){if(e==null)return null;if(typeof e.tag==\"number\"&&p(\"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"),typeof e==\"function\")return e.displayName||e.name||null;if(typeof e==\"string\")return e;switch(e){case k:return\"Fragment\";case f:return\"Portal\";case G:return\"Profiler\";case N:return\"StrictMode\";case I:return\"Suspense\";case W:return\"SuspenseList\"}if(typeof e==\"object\")switch(e.$$typeof){case Z:var i=e;return ne(i)+\".Consumer\";case J:var r=e;return ne(r._context)+\".Provider\";case C:return Me(e,e.render,\"ForwardRef\");case O:var s=e.displayName||null;return s!==null?s:h(e.type)||\"Memo\";case F:{var d=e,l=d._payload,o=d._init;try{return h(o(l))}catch{return null}}}return null}var v=Object.assign,U=0,te,ie,re,se,ae,oe,de;function ce(){}ce.__reactDisabledLog=!0;function Ye(){{if(U===0){te=console.log,ie=console.info,re=console.warn,se=console.error,ae=console.group,oe=console.groupCollapsed,de=console.groupEnd;var e={configurable:!0,enumerable:!0,value:ce,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}U++}}function $e(){{if(U--,U===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:v({},e,{value:te}),info:v({},e,{value:ie}),warn:v({},e,{value:re}),error:v({},e,{value:se}),group:v({},e,{value:ae}),groupCollapsed:v({},e,{value:oe}),groupEnd:v({},e,{value:de})})}U<0&&p(\"disabledDepth fell below zero. This is a bug in React. Please file an issue.\")}}var L=g.ReactCurrentDispatcher,M;function S(e,i,r){{if(M===void 0)try{throw Error()}catch(d){var s=d.stack.trim().match(/\\n( *(at )?)/);M=s&&s[1]||\"\"}return`\n`+M+e}}var Y=!1,P;{var Ve=typeof WeakMap==\"function\"?WeakMap:Map;P=new Ve}function le(e,i){if(!e||Y)return\"\";{var r=P.get(e);if(r!==void 0)return r}var s;Y=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var l;l=L.current,L.current=null,Ye();try{if(i){var o=function(){throw Error()};if(Object.defineProperty(o.prototype,\"props\",{set:function(){throw Error()}}),typeof Reflect==\"object\"&&Reflect.construct){try{Reflect.construct(o,[])}catch(x){s=x}Reflect.construct(e,[],o)}else{try{o.call()}catch(x){s=x}e.call(o.prototype)}}else{try{throw Error()}catch(x){s=x}e()}}catch(x){if(x&&s&&typeof x.stack==\"string\"){for(var a=x.stack.split(`\n`),b=s.stack.split(`\n`),u=a.length-1,m=b.length-1;u>=1&&m>=0&&a[u]!==b[m];)m--;for(;u>=1&&m>=0;u--,m--)if(a[u]!==b[m]){if(u!==1||m!==1)do if(u--,m--,m<0||a[u]!==b[m]){var _=`\n`+a[u].replace(\" at new \",\" at \");return e.displayName&&_.includes(\"<anonymous>\")&&(_=_.replace(\"<anonymous>\",e.displayName)),typeof e==\"function\"&&P.set(e,_),_}while(u>=1&&m>=0);break}}}finally{Y=!1,L.current=l,$e(),Error.prepareStackTrace=d}var T=e?e.displayName||e.name:\"\",y=T?S(T):\"\";return typeof e==\"function\"&&P.set(e,y),y}function qe(e,i,r){return le(e,!1)}function ze(e){var i=e.prototype;return!!(i&&i.isReactComponent)}function j(e,i,r){if(e==null)return\"\";if(typeof e==\"function\")return le(e,ze(e));if(typeof e==\"string\")return S(e);switch(e){case I:return S(\"Suspense\");case W:return S(\"SuspenseList\")}if(typeof e==\"object\")switch(e.$$typeof){case C:return qe(e.render);case O:return j(e.type,i,r);case F:{var s=e,d=s._payload,l=s._init;try{return j(l(d),i,r)}catch{}}}return\"\"}var E=Object.prototype.hasOwnProperty,ue={},me=g.ReactDebugCurrentFrame;function A(e){if(e){var i=e._owner,r=j(e.type,e._source,i?i.type:null);me.setExtraStackFrame(r)}else me.setExtraStackFrame(null)}function Be(e,i,r,s,d){{var l=Function.call.bind(E);for(var o in e)if(l(e,o)){var a=void 0;try{if(typeof e[o]!=\"function\"){var b=Error((s||\"React class\")+\": \"+r+\" type `\"+o+\"` is invalid; it must be a function, usually from the `prop-types` package, but received `\"+typeof e[o]+\"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.\");throw b.name=\"Invariant Violation\",b}a=e[o](i,o,s,r,null,\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\")}catch(u){a=u}a&&!(a instanceof Error)&&(A(d),p(\"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).\",s||\"React class\",r,o,typeof a),A(null)),a instanceof Error&&!(a.message in ue)&&(ue[a.message]=!0,A(d),p(\"Failed %s type: %s\",r,a.message),A(null))}}}var He=Array.isArray;function $(e){return He(e)}function Xe(e){{var i=typeof Symbol==\"function\"&&Symbol.toStringTag,r=i&&e[Symbol.toStringTag]||e.constructor.name||\"Object\";return r}}function Ke(e){try{return fe(e),!1}catch{return!0}}function fe(e){return\"\"+e}function pe(e){if(Ke(e))return p(\"The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.\",Xe(e)),fe(e)}var R=g.ReactCurrentOwner,Ge={key:!0,ref:!0,__self:!0,__source:!0},be,xe,V;V={};function Je(e){if(E.call(e,\"ref\")){var i=Object.getOwnPropertyDescriptor(e,\"ref\").get;if(i&&i.isReactWarning)return!1}return e.ref!==void 0}function Ze(e){if(E.call(e,\"key\")){var i=Object.getOwnPropertyDescriptor(e,\"key\").get;if(i&&i.isReactWarning)return!1}return e.key!==void 0}function Qe(e,i){if(typeof e.ref==\"string\"&&R.current&&i&&R.current.stateNode!==i){var r=h(R.current.type);V[r]||(p('Component \"%s\" contains the string ref \"%s\". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',h(R.current.type),e.ref),V[r]=!0)}}function en(e,i){{var r=function(){be||(be=!0,p(\"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",i))};r.isReactWarning=!0,Object.defineProperty(e,\"key\",{get:r,configurable:!0})}}function nn(e,i){{var r=function(){xe||(xe=!0,p(\"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",i))};r.isReactWarning=!0,Object.defineProperty(e,\"ref\",{get:r,configurable:!0})}}var tn=function(e,i,r,s,d,l,o){var a={$$typeof:n,type:e,key:i,ref:r,props:o,_owner:l};return a._store={},Object.defineProperty(a._store,\"validated\",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(a,\"_self\",{configurable:!1,enumerable:!1,writable:!1,value:s}),Object.defineProperty(a,\"_source\",{configurable:!1,enumerable:!1,writable:!1,value:d}),Object.freeze&&(Object.freeze(a.props),Object.freeze(a)),a};function rn(e,i,r,s,d){{var l,o={},a=null,b=null;r!==void 0&&(pe(r),a=\"\"+r),Ze(i)&&(pe(i.key),a=\"\"+i.key),Je(i)&&(b=i.ref,Qe(i,d));for(l in i)E.call(i,l)&&!Ge.hasOwnProperty(l)&&(o[l]=i[l]);if(e&&e.defaultProps){var u=e.defaultProps;for(l in u)o[l]===void 0&&(o[l]=u[l])}if(a||b){var m=typeof e==\"function\"?e.displayName||e.name||\"Unknown\":e;a&&en(o,m),b&&nn(o,m)}return tn(e,a,b,d,s,R.current,o)}}var q=g.ReactCurrentOwner,_e=g.ReactDebugCurrentFrame;function w(e){if(e){var i=e._owner,r=j(e.type,e._source,i?i.type:null);_e.setExtraStackFrame(r)}else _e.setExtraStackFrame(null)}var z;z=!1;function B(e){return typeof e==\"object\"&&e!==null&&e.$$typeof===n}function he(){{if(q.current){var e=h(q.current.type);if(e)return`\n\nCheck the render method of \\``+e+\"`.\"}return\"\"}}function sn(e){{if(e!==void 0){var i=e.fileName.replace(/^.*[\\\\\\/]/,\"\"),r=e.lineNumber;return`\n\nCheck your code at `+i+\":\"+r+\".\"}return\"\"}}var Ne={};function an(e){{var i=he();if(!i){var r=typeof e==\"string\"?e:e.displayName||e.name;r&&(i=`\n\nCheck the top-level render call using <`+r+\">.\")}return i}}function ke(e,i){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var r=an(i);if(Ne[r])return;Ne[r]=!0;var s=\"\";e&&e._owner&&e._owner!==q.current&&(s=\" It was passed a child from \"+h(e._owner.type)+\".\"),w(e),p('Each child in a list should have a unique \"key\" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',r,s),w(null)}}function ve(e,i){{if(typeof e!=\"object\")return;if($(e))for(var r=0;r<e.length;r++){var s=e[r];B(s)&&ke(s,i)}else if(B(e))e._store&&(e._store.validated=!0);else if(e){var d=Pe(e);if(typeof d==\"function\"&&d!==e.entries)for(var l=d.call(e),o;!(o=l.next()).done;)B(o.value)&&ke(o.value,i)}}}function on(e){{var i=e.type;if(i==null||typeof i==\"string\")return;var r;if(typeof i==\"function\")r=i.propTypes;else if(typeof i==\"object\"&&(i.$$typeof===C||i.$$typeof===O))r=i.propTypes;else return;if(r){var s=h(i);Be(r,e.props,\"prop\",s,e)}else if(i.PropTypes!==void 0&&!z){z=!0;var d=h(i);p(\"Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?\",d||\"Unknown\")}typeof i.getDefaultProps==\"function\"&&!i.getDefaultProps.isReactClassApproved&&p(\"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.\")}}function dn(e){{for(var i=Object.keys(e.props),r=0;r<i.length;r++){var s=i[r];if(s!==\"children\"&&s!==\"key\"){w(e),p(\"Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.\",s),w(null);break}}e.ref!==null&&(w(e),p(\"Invalid attribute `ref` supplied to `React.Fragment`.\"),w(null))}}var ye={};function cn(e,i,r,s,d,l){{var o=Le(e);if(!o){var a=\"\";(e===void 0||typeof e==\"object\"&&e!==null&&Object.keys(e).length===0)&&(a+=\" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\");var b=sn(d);b?a+=b:a+=he();var u;e===null?u=\"null\":$(e)?u=\"array\":e!==void 0&&e.$$typeof===n?(u=\"<\"+(h(e.type)||\"Unknown\")+\" />\",a=\" Did you accidentally export a JSX literal instead of a component?\"):u=typeof e,p(\"React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s\",u,a)}var m=rn(e,i,r,d,l);if(m==null)return m;if(o){var _=i.children;if(_!==void 0)if(s)if($(_)){for(var T=0;T<_.length;T++)ve(_[T],e);Object.freeze&&Object.freeze(_)}else p(\"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\");else ve(_,e)}if(E.call(i,\"key\")){var y=h(e),x=Object.keys(i).filter(function(mn){return mn!==\"key\"}),H=x.length>0?\"{key: someKey, \"+x.join(\": ..., \")+\": ...}\":\"{key: someKey}\";if(!ye[y+H]){var un=x.length>0?\"{\"+x.join(\": ..., \")+\": ...}\":\"{}\";p(`A props object containing a \"key\" prop is being spread into JSX:\n  let props = %s;\n  <%s {...props} />\nReact keys must be passed directly to JSX without using spread:\n  let props = %s;\n  <%s key={someKey} {...props} />`,H,y,un,y),ye[y+H]=!0}}return e===k?dn(m):on(m),m}}var ln=cn;K.Fragment=k,K.jsxDEV=ln})()});var Re=X((Cn,Ee)=>{\"use strict\";Ee.exports=Ue()});var Tn={};hn(Tn,{default:()=>gn,frontmatter:()=>vn});var t=Nn(Re()),vn={type:\"Post\",title:\"Build A Toast Component With React From Scratch\",publishedAt:\"Feb 1, 2022\",isPublished:!0,description:\"Create a react toast with tailwind, framer motion and zustand by yourself.\",toc:!0,category:\"web\",image:\"/assets/images/build-a-toast-component-with-react-from-scrach/bg.avif\",tags:[\"react\",\"tailwind\",\"framer motion\",\"zustand\",\"typescript\"],thumbnail:{author:\"brandi-redd\",url:\"/assets/images/build-a-toast-component-with-react-from-scrach/bg.avif\",from:\"https://unsplash.com/@brandi1\"}};function Ce(c){let n=Object.assign({h2:\"h2\",p:\"p\",a:\"a\",blockquote:\"blockquote\",ul:\"ul\",li:\"li\",code:\"code\",em:\"em\",pre:\"pre\",h3:\"h3\"},c.components),{ToastForPost:f}=n;return f||wn(\"ToastForPost\",!0,\"36:16-36:31\"),(0,t.jsxDEV)(t.Fragment,{children:[(0,t.jsxDEV)(n.h2,{children:\"What is toast?\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:24,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[`A toast is a common react component we see on the website. It can\nbe used as a notification to display messages for the users. We may somewhat\nuse libraries like `,(0,t.jsxDEV)(n.a,{href:\"https://fkhadra.github.io/react-toastify/introduction\",children:\"React Toastify\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:28,columnNumber:20},this),\" and \",(0,t.jsxDEV)(n.a,{href:\"https://react-hot-toast.com/\",children:\"React Hot Toast\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:28,columnNumber:96},this),`.\nBut today in this article we will build one by ourselves. If you're interested, please keep reading.`]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:26,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.blockquote,{children:[`\n`,(0,t.jsxDEV)(n.p,{children:\"\\u2728 This tutorial assumes that you have a basic understanding of React.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:31,columnNumber:3},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"\\u2728 You may take a look at the documentation of \",(0,t.jsxDEV)(n.a,{href:\"https://www.framer.com/motion/\",children:\"Framer Motion\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:33,columnNumber:49},this),\", \",(0,t.jsxDEV)(n.a,{href:\"https://github.com/pmndrs/zustand\",children:\"Zustand\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:33,columnNumber:98},this),\" if you are not familiar with them.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:33,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:31,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[`I've used the same toast component on this website. To see what the final result looks like, you can click\nthese buttons: `,(0,t.jsxDEV)(f,{},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:36,columnNumber:16},this),` Or\nyou can leave a comment in the comment section, you will see either a success message or a error message pops up on the right corner of the screen. Any comments or feedback are appreciated. \\u{1F64F} I've also made a repo in the `,(0,t.jsxDEV)(n.a,{href:\"https://github.com/patrick-xin/react-toast-tailwind-framer-motion\",children:\"github\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:37,columnNumber:223},this),\", feel free to check it out.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:35,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h2,{children:\"Tools We're Gonna Use\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:39,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.ul,{children:[`\n`,(0,t.jsxDEV)(n.li,{children:[\"A Typescript React app. I will use NextJS. You can run \",(0,t.jsxDEV)(n.code,{children:\"yarn create-next-app --example with-tailwindcss with-tailwindcss-app\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:41,columnNumber:58},this),\" in the command line. This repo has been updated using Typescript by default.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:41,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:[\"Animation Libary - \",(0,t.jsxDEV)(n.a,{href:\"https://www.framer.com/motion/\",children:\"Framer Motion\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:42,columnNumber:22},this)]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:42,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:[\"Styling - \",(0,t.jsxDEV)(n.a,{href:\"https://tailwindcss.com/\",children:\"TailwindCSS\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:43,columnNumber:13},this)]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:43,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:[\"State Managment \",(0,t.jsxDEV)(n.a,{href:\"https://github.com/pmndrs/zustand\",children:\"Zustand\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:44,columnNumber:19},this)]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:44,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:41,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"After initializing the app, run \",(0,t.jsxDEV)(n.code,{children:\"yarn add framer-motion zustand\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:46,columnNumber:33},this),\" to add \",(0,t.jsxDEV)(n.em,{children:\"Framer Motion\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:46,columnNumber:73},this),\" and \",(0,t.jsxDEV)(n.em,{children:\"Zustand\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:46,columnNumber:93},this),\" packages to our project.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:46,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"You can also use other state management libraries like \",(0,t.jsxDEV)(n.em,{children:\"Redux\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:48,columnNumber:56},this),\" or \",(0,t.jsxDEV)(n.em,{children:\"Context API\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:48,columnNumber:67},this),\". The idea is the same: we don't have to pass props to the child components and avoid \\u{1F612}\",(0,t.jsxDEV)(n.em,{children:\"Prop Drilling\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:48,columnNumber:168},this),\". If you are not sure what \",(0,t.jsxDEV)(n.em,{children:\"Prop Drilling\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:48,columnNumber:210},this),\" is, check this \",(0,t.jsxDEV)(n.a,{href:\"https://kentcdodds.com/blog/prop-drilling\",children:\"article\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:48,columnNumber:241},this),\" written by Kent C. Dodds. Personally, I think he gave the best explanation of it.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:48,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"Enough talking, let's get started!\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:50,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h2,{children:\"Define Toast State\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:52,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"let's create a folder called \",(0,t.jsxDEV)(n.em,{children:\"store\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:54,columnNumber:30},this),\" inside the root directory first. Then inside it create \",(0,t.jsxDEV)(n.code,{children:\"toast-store.ts\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:54,columnNumber:93},this)]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:54,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-ts:store/toast-store.ts\",children:`import create from \"zustand\";\n\nexport const useToastStore = create((set) => ({\n  isToastOpen: false,\n  closeToast: () => set(() => ({ isToastOpen: false })),\n  message: \"\",\n}));\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:56,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:56,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"Quickly you wll notice the error on \",(0,t.jsxDEV)(n.code,{children:\"set\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:66,columnNumber:37},this),\" function, simply ignore it, we will fix it later when we define types of the store.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:66,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"The basic state of our toast store is if the toast opens or not. We will use the flag \",(0,t.jsxDEV)(n.code,{children:\"isToastOpen\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:68,columnNumber:87},this),\" to control the state of the toast. Initially, we set it \",(0,t.jsxDEV)(n.code,{children:\"false\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:68,columnNumber:157},this),\". The toast will open once its value is set to \",(0,t.jsxDEV)(n.code,{children:\"true\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:68,columnNumber:211},this),\". We will also need a function to close the toast, which means we set \",(0,t.jsxDEV)(n.code,{children:\"isToastOpen\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:68,columnNumber:287},this),\" back to its default state. We will also need the actual \",(0,t.jsxDEV)(n.em,{children:\"message\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:68,columnNumber:357},this),\" to display.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:68,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"You may notice that we don't have a function to open it. Yes we can change \",(0,t.jsxDEV)(n.code,{children:\"closeToast\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:70,columnNumber:76},this),\" function to \",(0,t.jsxDEV)(n.code,{children:\"toggleToast\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:70,columnNumber:101},this),\" and make it toggle current \",(0,t.jsxDEV)(n.code,{children:\"isToastOpen\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:70,columnNumber:142},this),` state.\nBut bear with me, I have a better option. Let's continue.`]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:70,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"We will add more properties to our current toast state.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:73,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-ts:store/toast-store.ts\",children:`import create from \"zustand\";\n\nexport const useToastStore = create((set) => ({\n  isToastOpen: false,\n  closeToast: () => set(() => ({ isToastOpen: false })),\n  message: \"\",\n  toastType: \"success\",\n  position: \"bottomCenter\",\n  direction: \"fadeUp\",\n}));\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:75,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:75,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[(0,t.jsxDEV)(n.code,{children:\"toastType\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:88,columnNumber:1},this),\" is the option that we can decide based on what we need, it could be one of \\u2705success, \\u274Cerror, or \\u26D4\\uFE0Fwarning, but it is not limited, we can display all kinds of toast if we want!\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:88,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"We can also display the toast in various positions and decide how it pops up with the \",(0,t.jsxDEV)(n.code,{children:\"position\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:90,columnNumber:87},this),\" and \",(0,t.jsxDEV)(n.code,{children:\"direction\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:90,columnNumber:102},this),\" properties.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:90,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"Now let's add the function that actually will open the toast.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:92,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-ts:store/toast-store.ts\",children:`import create from \"zustand\";\n\nexport const useToastStore = create((set) => ({\n  isToastOpen: false,\n  closeToast: () => set(() => ({ isToastOpen: false })),\n  message: \"\",\n  toastType: \"success\",\n  position: \"bottomCenter\",\n  direction: \"fadeUp\",\n  toast: {\n    success: (message, position?, direction?) =>\n      set((state) => ({\n        isToastOpen: true,\n        toastType: 'success',\n        message,\n        position: position ?? state.position,\n        direction: direction ?? state.direction,\n      })),\n    error: (message, position?, direction?) =>\n      set((state) => ({\n        isToastOpen: true,\n        toastType: \"error\",\n        message,\n        position: position ?? state.position,\n        direction: direction ?? state.direction,\n      })),\n    warning: (message, position?, direction?) =>\n      set((state) => ({\n        isToastOpen: true,\n        toastType: \"warning\",\n        message,\n        position: position ?? state.position,\n        direction: direction ?? state.direction,\n      })),\n  },\n}));\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:94,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:94,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[(0,t.jsxDEV)(n.code,{children:\"toast\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:133,columnNumber:1},this),\" is an object that has all the methods we can use later, the syntax will be like \",(0,t.jsxDEV)(n.code,{children:\"toast. success('success message', 'bottomCenter', 'fadeUp')\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:133,columnNumber:89},this),\". The toast component will be different if we pass different arguments. Notice the \",(0,t.jsxDEV)(n.code,{children:\"set\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:133,columnNumber:233},this),\" function can take a state argument that we can access the current state. Each function inside the toast object\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:133,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.blockquote,{children:[`\n`,(0,t.jsxDEV)(n.p,{children:[\"\\u2753 Question mark after the parameters means this argument is optional, if we don't pass it, it will be \",(0,t.jsxDEV)(n.code,{children:\"undefined\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:135,columnNumber:105},this),\".\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:135,columnNumber:3},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"\\u2753\\u2753 Double question mark means if \",(0,t.jsxDEV)(n.code,{children:\"position\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:137,columnNumber:36},this),\" is \",(0,t.jsxDEV)(n.code,{children:\"undefined\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:137,columnNumber:50},this),\" it will fall back to default state.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:137,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:135,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"Add Types\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:139,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-ts:store/toast-store.ts\",children:`type Position = \"topCenter\" | \"bottomCenter\" | \"topRight\" | \"bottomRight\";\ntype ToastType = \"success\" | \"error\" | \"warning\";\ntype Direction = \"fadeUp\" | \"fadeLeft\";\ntype ToastState = {\n  isToastOpen: boolean;\n  closeToast: () => void;\n  message: string;\n  toastType: ToastType;\n  position: Position;\n  direction: Direction;\n  toast: {\n    success: (\n      message: string,\n      position?: Position,\n      direction?: Direction\n    ) => void;\n    error: (message: string, position?: Position, direction?: Direction) => void;\n    warning: (\n      message: string,\n      position?: Position,\n      direction?: Direction\n    ) => void;\n  };\n};\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:141,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:141,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"Then we can add \",(0,t.jsxDEV)(n.code,{children:\"type ToastState\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:168,columnNumber:17},this),\" to the \",(0,t.jsxDEV)(n.code,{children:\"create\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:168,columnNumber:42},this),\" function.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:168,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-diff:store/toast-store.ts\",children:`\n++ const useToastStore = create<ToastState>((set) => ({\n  isToastOpen: false,\n  closeToast: () => set(() => ({ isToastOpen: false })),\n  message: \"\",\n  ...\n}));\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:170,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:170,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"Now the error is gone and Typescript will help us avoid making typos and prevent us pass wrong types of arguments. It's simple, isn't it? That's it for the store. We are halfway there! We can start building the toast component now.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:180,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h2,{children:\"Make Toast Component\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:182,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-tsx:components/toast.tsx\",children:`const Toast = ()=>{\n    return (\n        <div className='fixed top-0 right-0 flex items-center justify-around rounded h-12 w-48'>\n            <button className=\"px-1 py-2\">X</button>\n            This is Toast Component\n        </div>\n    )\n}\nexport default Toast;\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:184,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:184,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"Render Toast Component On Screen\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:196,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-tsx:pages/index.tsx\",children:`import Toast from \"../components/toast\";\n\nconst HomePage = ()=>{\n    return (\n        <div>\n            <Toast/>\n        </div>\n    )\n}\nexport default HomePage\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:198,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:198,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"The Toast component should be on the right top of the screen. We haven't styled it yet. It's probably the uglies toast you've ever seen. Let's use the store we just built to take full control of it.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:211,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"Add Animation, Connect Store\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:213,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-tsx:components/toast.tsx\",children:`import {motion, AnimatePresence} from 'framer-motion'\nimport {useToastStore} from '../store/toast-store'\n\nconst Toast = ()=>{\n    const { isToastOpen, message, toastType, position, direction, closeToast } =\n    useToastStore();\n\n    return (\n        <AnimatePresence>\n            {isToastOpen && (\n                <motion.div className='fixed top-0 right-0 flex items-center justify-around text-white rounded h-12 w-48'>\n                    {message}\n                    <button className=\"px-1 py-2\">X</button>\n            </motion.div>\n            )}\n        </AnimatePresence>\n    )\n}\nexport default Toast;\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:215,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:215,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"Toast Component will always be hidden until we set \",(0,t.jsxDEV)(n.code,{children:\"isToastOpen\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:237,columnNumber:52},this),\" to \",(0,t.jsxDEV)(n.code,{children:\"true\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:237,columnNumber:69},this),\" inside the store. As you can see, we don't have to pass any props to the component itself, the \",(0,t.jsxDEV)(n.em,{children:\"show/hide\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:237,columnNumber:171},this),\" state is completely managed by our store.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:237,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.blockquote,{children:[`\n`,(0,t.jsxDEV)(n.p,{children:[(0,t.jsxDEV)(n.a,{href:\"https://www.framer.com/docs/animate-presence/\",children:\"AnimatePresence\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:239,columnNumber:3},this),\" allows components to animate out when they're removed from the React tree.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:239,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:239,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"It is perfect to animate the component when it's mounting and unmounting. Also, we can remove \",(0,t.jsxDEV)(n.code,{children:\"This is Toast Component\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:241,columnNumber:95},this),\" inside the toast and replace it with \",(0,t.jsxDEV)(n.code,{children:\"message\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:241,columnNumber:158},this),\" that we pass through.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:241,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"Now it's time to add some configurations to it to make it beautiful and functional.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:243,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"Wrire Configrations\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:245,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-tsx:components/toast.tsx\",children:`\n const toastTypes = {\n    success: 'bg-green-500',\n    error: 'bg-red-500',\n    warning: 'bg-yellow-500'\n}\n\n const positions = {\n    topCenter: 'top-0 mx-auto',\n    topRight: 'top-0 right-0',\n    bottomCenter: 'bottom-0 mx-auto',\n    bottomRight: 'bottom-0 right-0'\n}\n\n const variants = {\n    fadeLeft:{\n        initial:{\n            opacity:0,\n            x:'100%'\n        },\n\n        animate:{\n            opacity:1,\n            x:0\n        },\n        exit:{\n            opacity:0,\n            x:'100%'\n        }\n    },\n    fadeUp:{\n        initial:{\n            opacity:0,\n            y:12\n        },\n        animate:{\n            opacity:1,\n            y:0\n        },\n        exit:{\n            opacity:0,\n            y:'-100%'\n        }\n    } }\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:247,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:247,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"Add Configrations To Toast Component\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:294,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"Now we are ready to add config to the toast component. We will define configurations as objects so that we can easily combine them with the options in our toast store and use \",(0,t.jsxDEV)(n.code,{children:\"template literal\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:296,columnNumber:176},this),\" inside Tailwind classNames.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:296,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-tsx:components/toast.tsx\",children:`const Toast = () => {\n  const { isToastOpen, message, toastType, position, direction, closeToast } =\n    useToastStore();\n\n  return (\n    <AnimatePresence>\n      {isToastOpen && (\n        <motion.div\n          variants={variants[direction]}\n          initial=\"initial\"\n          animate=\"animate\"\n          exit=\"exit\"\n          className={\\`\\${positions[position]} \\${toastTypes[toastType]} fixed flex items-center justify-around rounded h-12 w-48\\`}\n        >\n          {message}\n          <button className=\"px-1 py-2\" onClick={closeToast}>\n            X\n          </button>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n};\nexport default Toast;\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:298,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:298,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.blockquote,{children:[`\n`,(0,t.jsxDEV)(n.p,{children:[\"Dont' forget to remove \",(0,t.jsxDEV)(n.code,{children:\"top-0 right-0\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:325,columnNumber:26},this),\" from the \",(0,t.jsxDEV)(n.code,{children:\"className\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:325,columnNumber:51},this),\", otherwise it will overwrite the position we passed in.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:325,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:325,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"If you are confused by the props we pass inside \",(0,t.jsxDEV)(n.code,{children:\"motion.div\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:327,columnNumber:49},this),\" like \",(0,t.jsxDEV)(n.code,{children:\"variants\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:327,columnNumber:67},this),\", \",(0,t.jsxDEV)(n.code,{children:\"initial\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:327,columnNumber:79},this),\", \",(0,t.jsxDEV)(n.code,{children:\"animate\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:327,columnNumber:90},this),\", \",(0,t.jsxDEV)(n.code,{children:\"exit\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:327,columnNumber:101},this),`,\nhave a look at `,(0,t.jsxDEV)(n.a,{href:\"https://www.framer.com/docs/examples/#variants\",children:\"this\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:328,columnNumber:16},this),\" as reference.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:327,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"We're almost done! I will be so glad if you are still here. Finally, it's time to test if it works. Let's give it a shot!\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:330,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"Open Toast\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:332,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-tsx:pages/index.tsx\",children:`import Toast from \"../components/toast\";\nimport { useToastStore } from \"../store/toast-store\";\n\nconst HomePage = () => {\n  const { toast } = useToastStore();\n  return (\n    <div className=\"flex justify-center items-center h-screen\">\n      <Toast />\n      <div className=\"flex gap-4\">\n        <button\n          className=\"bg-green-500 px-1 py-2 rounded\"\n          onClick={() =>\n            toast.success(\"Success message\", \"bottomRight\", \"fadeLeft\")\n          }\n        >\n          success button\n        </button>\n      </div>\n    </div>\n  );\n};\nexport default HomePage\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:334,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:334,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"If everything works fine, you should see the success toast will pop up on the right corner of the screen after the button is clicked. With our current setup, we can control where we can close the toast. We can create a close button inside \",(0,t.jsxDEV)(n.code,{children:\"index.tsx\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:359,columnNumber:240},this),\".\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:359,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"Close Toast\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:361,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-tsx:pages/index.tsx\",children:`import Toast from \"../components/toast\";\nimport { useToastStore } from \"../store/toast-store\";\n\nconst HomePage = () => {\n  const { toast, closeToast } = useToastStore();\n  return (\n    <div className=\"flex justify-center items-center h-screen\">\n      <Toast />\n      <div className=\"flex gap-4\">\n        <button\n          className=\"bg-green-500 px-1 py-2 rounded\"\n          onClick={() =>\n            toast.success(\"Success message\", \"bottomRight\", \"fadeLeft\")\n          }\n        >\n          success button\n        </button>\n        <button className=\"bg-cyan-500 px-1 py-2 rounded\" onClick={closeToast}>\n          close\n        </button>\n      </div>\n    </div>\n  );\n};\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:363,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:363,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"Display Different Toasts\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:390,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"Let's test all the toast with different positions and types.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:392,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-tsx:pages/index.tsx\",children:`import Toast from \"../components/toast\";\nimport { useToastStore } from \"../store/toast-store\";\n\nconst HomePage = () => {\n  const { toast, closeToast } = useToastStore();\n  return (\n    <div className=\"flex justify-center items-center h-screen\">\n      <Toast />\n      <div className=\"flex gap-4\">\n        <button\n          className=\"bg-green-500 px-1 py-2 rounded\"\n          onClick={() =>\n            toast.success(\"Success message\", \"topCenter\", \"fadeUp\")\n          }\n        >\n          success button\n        </button>\n        <button\n          className=\"bg-red-500 px-1 py-2 rounded\"\n          onClick={() => toast.error(\"Error message\", \"topRight\", \"fadeLeft\")}\n        >\n          error button\n        </button>\n        <button\n          className=\"bg-yellow-500 px-1 py-2 rounded\"\n          onClick={() =>\n            toast.warning(\"Warning message\", \"bottomCenter\", \"fadeUp\")\n          }\n        >\n          warning button\n        </button>\n        <button className=\"bg-cyan-500 px-1 py-2 rounded\" onClick={closeToast}>\n          close\n        </button>\n      </div>\n    </div>\n  );\n};\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:394,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:394,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"There is a small issue. If you keep clicking buttons without clicking the close button, you will notice that sometimes the position like \",(0,t.jsxDEV)(n.code,{children:\"fadeLeft\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:435,columnNumber:138},this),\" doesn't work, the animation is also clunky. That's because the toast component is never unmounted, so the \",(0,t.jsxDEV)(n.code,{children:\"exit\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:435,columnNumber:255},this),\" property on the \",(0,t.jsxDEV)(n.code,{children:\"motion.div\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:435,columnNumber:278},this),\" is never animated.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:435,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.blockquote,{children:[`\n`,(0,t.jsxDEV)(n.p,{children:\"In React, changing a component's key makes React treat it as an entirely new component.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:437,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:437,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"To fix it, simply add a prop \",(0,t.jsxDEV)(n.code,{children:\"key={toastType}\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:439,columnNumber:30},this),\" inside \",(0,t.jsxDEV)(n.code,{children:\"motion.div\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:439,columnNumber:55},this),\" component. Be careful that the \",(0,t.jsxDEV)(n.code,{children:\"key\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:439,columnNumber:99},this),\" has to be unique! This is similar when we map an array of components, I'm sure you have seen the error in the console that says \",(0,t.jsxDEV)(n.code,{children:\"each component must have a unique key property. In our case, we keep changing \"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:439,columnNumber:233},this),\"toastType` so it has no problems.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:439,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-diff:components/toast.tsx\",children:`  ...\n++<motion.div key={toastType}\n  ...\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:441,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:441,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"Congrats! \\u{1F44F} \\u{1F44F} We just finished building a basic yet fully functional toast. This is just the fundamental setup, you can be as creative as you can, adding features like removing it automatically using \",(0,t.jsxDEV)(n.code,{children:\"setTimeOut\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:447,columnNumber:203},this),\" inside \",(0,t.jsxDEV)(n.code,{children:\"useEffect\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:447,columnNumber:223},this),\" hook, displaying multiple toasts at the same time, etc... Feel free to fork the \",(0,t.jsxDEV)(n.a,{href:\"https://github.com/patrick-xin/react-toast-tailwind-framer-motion\",children:\"repo\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:447,columnNumber:315},this),\" and add as many features as you want!\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:447,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h2,{children:\"What Can Be Improved?\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:449,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"Thanks again for following along, below are just some personal thoughts as a web developer. I always like to think about what I can improve after writing the codes. Are my current codes easy to add more new features?\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:451,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"Toast Object In Store\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:453,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"We have three functions in the \",(0,t.jsxDEV)(n.code,{children:\"toast\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:455,columnNumber:32},this),\" object, each of them is receiving three arguments, only \",(0,t.jsxDEV)(n.code,{children:\"message\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:455,columnNumber:96},this),\" is required. What if we want to omit the second \",(0,t.jsxDEV)(n.code,{children:\"position\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:455,columnNumber:154},this),\" argument but pass the \",(0,t.jsxDEV)(n.code,{children:\"direction\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:455,columnNumber:187},this),\" argument? We have to do something this:\",(0,t.jsxDEV)(n.code,{children:\"toast.success('success message', undefined, 'topCenter')\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:455,columnNumber:238},this),\", or add a different icon to a different kind of toast? We can keep \",(0,t.jsxDEV)(n.code,{children:\"message\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:455,columnNumber:364},this),\" as it is and change the last two parameters into an options object! We can make each property inside optional so we don't have to worry if we don't pass anything. It may look like this \",(0,t.jsxDEV)(n.code,{children:\"toast.success('success message', {position:'topRight', direction:'fadeUp', icon:<CheckIcon/>})\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:455,columnNumber:559},this)]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:455,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"Render Toast in Portal\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:457,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.blockquote,{children:[`\n`,(0,t.jsxDEV)(n.p,{children:\"What is Portal? Portals provide a first-class way to render children into a DOM node that exists outside the DOM hierarchy of the parent component.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:459,columnNumber:3},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"When to use Portal? A typical use case for portals is when a parent component has an overflow: hidden or z-index style, but you need the child to visually \\u201Cbreak out\\u201D of its container. For example, dialogs, hovercards, and tooltips.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:461,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:459,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"As you can see, our toast can be considered as \",(0,t.jsxDEV)(n.em,{children:\"dialogs\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:463,columnNumber:48},this),\", rendering it outside the main component tree can improve the performance of our apps.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:463,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"Accessibility\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:465,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"With the current setup, there is no way we can close the toast using the keyboard. We can make the close button inside the toast autofocus when it mounts, giving users a better experience. In my current website, I'm using \",(0,t.jsxDEV)(n.a,{href:\"https://headlessui.dev/\",children:\"Headless UI\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:467,columnNumber:223},this),\" to handle these problems.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:467,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"That's it for this post. Hope you enjoy reading it. If you have any questions or thoughts feel free to leave a comment below. Cheers!\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:469,columnNumber:1},this)]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\",lineNumber:1,columnNumber:1},this)}function yn(c={}){let{wrapper:n}=c.components||{};return n?(0,t.jsxDEV)(n,Object.assign({},c,{children:(0,t.jsxDEV)(Ce,c,void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\"},this)}),void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx\"},this):Ce(c)}var gn=yn;function wn(c,n,f){throw new Error(\"Expected \"+(n?\"component\":\"object\")+\" `\"+c+\"` to be defined: you likely forgot to import, pass, or provide it.\"+(f?\"\\nIt\\u2019s referenced in your code at `\"+f+\"` in `/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-b37f9752-6355-48e5-9da3-7f479666287d.mdx`\":\"\"))}return kn(Tn);})();\n/*! Bundled license information:\n\nreact/cjs/react-jsx-dev-runtime.development.js:\n  (**\n   * @license React\n   * react-jsx-dev-runtime.development.js\n   *\n   * Copyright (c) Facebook, Inc. and its affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *)\n*/\n;return Component;"
        },
        "_id": "build-a-toast-component-with-react-from-scrach.mdx",
        "_raw": {
          "sourceFilePath": "build-a-toast-component-with-react-from-scrach.mdx",
          "sourceFileName": "build-a-toast-component-with-react-from-scrach.mdx",
          "sourceFileDir": ".",
          "contentType": "mdx",
          "flattenedPath": "build-a-toast-component-with-react-from-scrach"
        },
        "type": "Post",
        "readingTime": {
          "text": "12 min read",
          "minutes": 11.225,
          "time": 673500,
          "words": 2245
        },
        "wordCount": 2247,
        "slug": "build-a-toast-component-with-react-from-scrach",
        "url": "/post/build-a-toast-component-with-react-from-scrach"
      },
      "documentHash": "1720247163572",
      "hasWarnings": false,
      "documentTypeName": "Post"
    },
    "infinite-scrolling-with-react-query-and-prisma.mdx": {
      "document": {
        "title": "Infinite Scrolling With React Query And Prisma In Next.js",
        "publishedAt": "March 3, 2022",
        "description": "Add infinite scrolling feature to your next React project.",
        "image": "/assets/images/infinite-scrolling-with-react-query-and-prisma/bg.avif",
        "isPublished": true,
        "toc": true,
        "thumbnail": {
          "author": "Andras Vas",
          "url": "/assets/images/infinite-scrolling-with-react-query-and-prisma/bg.avif",
          "from": "https://unsplash.com/@wasdrew"
        },
        "category": "web",
        "tags": [
          "react",
          "nextjs",
          "react-query",
          "prisma",
          "typescript",
          "infinite-scrolling",
          "pagination"
        ],
        "body": {
          "raw": "\n## Intro\n\nInfinite scrolling is a common technique used in many web apps, especially on large social websites. It allows users to keep scrolling to the page without clicking pagination buttons. While in the background it loads content continuously. The homepage of [Twitter](https://twitter.com/) and [DevTo](https://dev.to/) are two good examples. I'm a big fan of it simply because sometimes I'm just too lazy to click a button. No doubt there are downsides to it, or maybe some people even hate it. But it's always fun trying something new, especially putting the technology you love together.\nIf you also love the tools I'm using, please keep reading and follow along. I'll try my best to provide detailed explanations.\n\nOne reason I love Next.js is that it can serve static pages and server-side rendering. In the scenario where you have a large amount of dataset that you don't want to render all at a time. By only generating a fraction of it at request time or build time, then on the client-side implementing the infinite scrolling technique to fetch more data seems to be a solid option.\n\n> ✨ This article assumes that you are comfortable working with Next.js, React Query and Prisma. If not, I've listed some links at the very bottom of the page for you to reference.\n>\n> 🌱 For saving your time, I've created ready-to-use repo in Github. Clone the [starter](https://github.com/patrick-xin/infinite-scroll-with-react-query-nextjs) branch as I've set up all the tools and packages we need. You can also view the folder structure and create a new app yourself based on what you need.\n\n## What's Inside Repo?\n\nSkip this section if you're going to clone the repo.\n\n- Next.js app with Typescript.\n- Prisma. For local database connection, follow steps [here](https://www.prisma.io/docs/getting-started/quickstart) and create a `Post Model`.\n- React Query. For using it within a NextJS app, add [code blocks](https://react-query.tanstack.com/guides/ssr) to the `_app.tsx`\n- Tailwind CSS. I have completely given up writing pure css or styled components now.\n\n## Setup Backend\n\n### Connect Prisma\n\nI'm assuming you are ready to get started. First thing first, we need to connect to the local database. Create an `.env` in the root folder and add your local database url: `DATABASE_URL=YOUR_DATABASE_URL`. Run `yarn` to install packages. Then `yarn prisma migrate dev --name 'init'` to sync your local database with Prisma. It will also seed the fake posts data inside `_mock_` folder into the database. After that run `yarn prisma studio`, a browser window will pop up. You'll see 18 posts if everying works fine.\n\n### Create API Route\n\nInside `pages`, create a folder called `api`, then create a file `posts.ts` inside.\n\n```ts:api/posts.ts\nimport prisma from '../../src/lib/prisma'\nimport type { NextApiHandler } from 'next'\n\nconst handler: NextApiHandler = async (req, res) => {\n   try {\n    const posts = await prisma.post.findMany()\n    res.status(200).json(posts)\n  } catch (error) {\n    res.status(400).end()\n  }\n}\nexport default handler\n```\n\nThis API route is the only route we're going to use. For now, it will return all 18 posts, but we'll make it return the correct data we need later.\n\n### Render Posts\n\n```tsx:pages/index.tsx\nimport { useQuery } from 'react-query'\nimport PostCard from '../src/components/PostCard'\nimport type { Post } from '@prisma/client'\nimport type { NextPage } from 'next'\n\nconst getPosts = async (): Promise<Post[]> => {\n  const res = await fetch(`/api/posts`)\n  const data = await res.json()\n  return data\n}\n\nconst Home: NextPage = () => {\n  const { data: posts } = useQuery(['posts'], getPosts)\n\n  return (\n    <div className=\"mx-auto max-w-4xl bg-gray-50\">\n      <div className=\"m-6 mx-auto grid grid-cols-2 gap-6\">\n        {posts && posts.map((post) => <PostCard key={post.id} {...post} />)}\n      </div>\n    </div>\n  )\n}\n\nexport default Home\n```\n\nNow we got the app running and ready to implement infinite scrolling.\n\n## Infinite Scrolling\n\nUnder the hood, infinite scrolling is just another form of pagination. They all use the same technique querying the database. Two types of most common infinite scrolling are:\n\n- adding a load more button\n- placing a hidden `div` at the bottom of the page.\n\nThe difference is that the latter uses intersection observer to detect whether there are more contents in the view. If so, you can keep scrolling until there is no data. In order to understand how infinite scrolling works, we have to dive into how pagination works in Prisma first.\n\n### How Pagination Works In Prisma?\n\nThere are two types of pagination in Prisma: _offset pagination_ and _cursor-based pagination_. In order to make React Query work, we will use the latter. You can check the details of what are the differences between these two in the [doc](https://www.prisma.io/docs/concepts/components/prisma-client/pagination).\nI have to admit the first time when I read the documentation I was still muddled. If you are too, I've created some illustrations of how it works.\n\n<MDXImage\n  src=\"/assets/images/infinite-scrolling-with-react-query-and-prisma/illustration.png\"\n  alt='pagination-illustration'\n/>\n\nIn the code:\n\n```ts:sudo\n// Sudo code\n\n// First query\nconst firstQueryResult = await prisma.post.findMany({\n  skip: 0,\n  take: 4,\n  cursor: {\n    id: post4.id,\n  },\n})\n\n// Second query\nconst secondQueryResult = await prisma.post.findMany({\n  // skip post4\n  skip: 1,\n  take: 4,\n  cursor: {\n    id: post8.id,\n  },\n})\n```\n\n- `take` is how many posts we want to have in each query.\n- always `skip 1` after first query, but not in the last query.\n- `cursor` is an `object` where it will be used as the starting point in the next query.\n\nWe can keep fetching more posts as long as the `cursor` is not `undefined`.\nHopefully, the picture and the code are clear enough to understand, not the other way around.\n\nIf you're still confused, read the [doc](https://www.prisma.io/docs/concepts/components/prisma-client/pagination#cursor-based-pagination) or leave a comment below. If not, let's continue and add the following code to the `posts.ts` file.\n\n```ts:api/posts.ts {3-6, 10-12}\n// ......\nconst handler: NextApiHandler = async (req, res) => {\n  const take = 4\n  const cursorQuery = (req.query.cursor as string) ?? undefined\n  const skip = cursorQuery ? 1 : 0\n  const cursor = cursorQuery ? { id: cursorQuery } : undefined\n\n  try {\n    const posts = await prisma.post.findMany({\n      skip,\n      take,\n      cursor,\n    })\n\n    res.status(200).json({\n      posts,\n    })\n  } catch (error) {\n    res.status(400).end()\n  }\n}\n// ......\n```\n\nIn the above code, `cursorQuery` is the query string we pass from the client. If you remember from the picture above, it's just a simple `postId` string.\n\n### useInfiniteQuery\n\nReact Query comes with a hook in handy called `useInfiniteQuery`, which takes care of all the complicated logic for us already. You may want to take a look at the [doc](https://react-query.tanstack.com/guides/infinite-queries) if you've never used it before. Like `useQuery` hook, this hook takes a unique `key` as\nit's `queryKey`. But the query function now receives an `object` with `pageParam` property inside. We'll pass `postId` as an argumment into this function later. The basic manner looks like this:\n\n```ts\nconst {\n  fetchNextPage,\n  fetchPreviousPage,\n  hasNextPage,\n  hasPreviousPage,\n  isFetchingNextPage,\n  isFetchingPreviousPage,\n} = useInfiniteQuery(queryKey, ({ pageParam = 1 }) => fetchPage(pageParam), {\n  ...options,\n  getNextPageParam: (lastPage, allPages) => lastPage.nextCursor,\n  getPreviousPageParam: (firstPage, allPages) => firstPage.prevCursor,\n})\n```\n\nLet's refactor the `getPosts` function to make it match the shape of `useInfiniteQuery`. It will take `pageParam` as the parameter and uses it as the query string. (Don't forget it's `cursorQuery` on the API route). In addtion to the returned posts, it also return another property `nextId`. `nextId` will be used in the `getNextPageParam` function in React Query to decide if there will be more data to fetch or not.\n\n```tsx:index.tsx {2-6}\nconst getPosts = async ({\n  pageParam = '',\n}: {\n  pageParam: string\n}): Promise<{ posts: Post[]; nextId: string | undefined }> => {\n  const res = await fetch(`/api/posts?cursor=${pageParam}`)\n  const data = await res.json()\n\n  return data\n}\n```\n\nReplace `useQuery` with `useInfiniteQuery`.\n\n```tsx:index.tsx\nconst {\n  data: posts,\n} = useInfiniteQuery(\n  ['posts'],\n  ({ pageParam = '' }) => getPosts({ pageParam }),\n  {\n    // lastPage is the data returned from getPosts function\n    getNextPageParam: (lastPage) => lastPage.nextId ?? false,\n  }\n)\n```\n\nBack to `posts.ts`, we need to return `nextId`.\n\n```ts:api/posts.ts {10, 15}\n//......\ntry {\n  const posts = await prisma.post.findMany({\n    skip,\n    take,\n    cursor,\n  })\n  // Don't forget 0 based index\n  // posts.length < take means there are no more posts to fetch\n  const nextId = posts.length < take ? undefined : posts[take - 1].id\n  // posts.length is either equals or less than take, this code below will also work\n  // const nextId = posts.length === take ? posts[take - 1].id : undefined\n  res.status(200).json({\n    posts,\n    nextId,\n  })\n} catch (error) {\n  res.status(400).end()\n}\n//.....\n```\n\nNot sure what happened? Here is the visualization of how it works under the hood:\n\n<MDXImage\n  src=\"/assets/images/infinite-scrolling-with-react-query-and-prisma/illustration-1.png\"\n  alt=\"pagination-illustration\"\n/>\n\n<MDXImage\n  src=\"/assets/images/infinite-scrolling-with-react-query-and-prisma/illustration-2.png\"\n  alt=\"pagination-illustration\"\n/>\n\nFinally, in the last query:\n\n<MDXImage\n  src=\"/assets/images/infinite-scrolling-with-react-query-and-prisma/illustration-3.png\"\n  alt=\"pagination-illustration\"\n/>\n\nI hope these illustrations will help you better understand the code we've written so far. If you find there's\nmore to improve, or still not clear, please feel free to leave a comment!\n\n### Add Intersection Observer\n\nWe're almost done! The last piece is to add intersection observer to fetch more posts when we're scrolling to the bottom of the page. Open a new terminal and run `yarn add react-intersection-observer`.\n\n```tsx:pages/index.tsx {1-2, 25, 27, 29, 38-44, 48-61}\nimport { useEffect } from 'react'\nimport { useInView } from 'react-intersection-observer'\nimport { useInfiniteQuery } from 'react-query'\n\nimport PostCard from '../src/components/PostCard'\n\nimport type { Post } from '@prisma/client'\n\nconst getPosts = async ({\n  pageParam = '',\n}: {\n  pageParam: string\n}): Promise<{ posts: Post[]; nextId: string }> => {\n  const res = await fetch(`/api/posts?cursor=${pageParam}`)\n  const data = await res.json()\n  return data\n}\n\nconst Home = () => {\n  const {\n    data: posts,\n    // call this function to get another 4 posts\n    fetchNextPage,\n    // flag to decide if there is more posts\n    hasNextPage,\n    // flag to indicate if we're fetching or not\n    isFetchingNextPage\n  } = useInfiniteQuery(\n    ['posts'],\n    ({ pageParam = '' }) => getPosts({ pageParam }),\n    {\n      getNextPageParam: (lastPage) => lastPage.nextId ?? false,\n    }\n  )\n\n  const { inView, ref } = useInView()\n\n  useEffect(() => {\n    if (inView && hasNextPage) {\n      fetchNextPage()\n    }\n  }, [inView, hasNextPage])\n\n  return (\n    <div className=\"mx-auto max-w-4xl bg-gray-50\">\n      {posts &&\n        posts.pages?.flatMap((page, i) => {\n          return (\n            <div key={i} className=\"m-6 mx-auto grid grid-cols-2 gap-6\">\n              {page.posts.map((post) => {\n                return <PostCard key={post.id} {...post} />\n              })}\n            </div>\n          )\n        })}\n      <div\n        className=\"mx-auto flex max-w-6xl justify-center opacity-0\"\n        ref={ref}\n      />\n    </div>\n  )\n}\n\nexport default Home\n```\n\nSince the data returned from the server has changed, we need also change `mapping` function. Now the `posts` have `pages` property that contains all the data we need.\n\n### Add Loading Indicator\n\nGo back to browser you may won't notice any difference, that's because in our dev evironment, the connection to the database is pretty fast. To simulate a slow network and test the result, we can defer 2000ms in the `getPosts` function before it returns data.\n\n```tsx:pages/index.tsx {7}\n// ......\nconst getPosts = async ({\n  pageParam = '',\n}: {\n  pageParam: string\n}): Promise<{ posts: Post[]; nextId: string }> => {\n  await new Promise((resolve) => setTimeout(resolve, 2000))\n  const res = await fetch(`/api/posts?cursor=${pageParam}`)\n  const data = await res.json()\n\n  return data\n}\n// ......\n```\n\n```tsx:pages/index.tsx {2, 14}\n// ......\nimport PostCardLoader from '../src/components/PostCardLoader'\n// ......\n{posts &&\n  posts.pages?.flatMap((page, i) => {\n      return (\n        <div key={i} className=\"m-6 mx-auto grid grid-cols-2 gap-6\">\n          {page.posts.map((post) => {\n            return <PostCard key={post.id} {...post} />\n          })}\n        </div>\n      )\n})}\n {isFetchingNextPage && <PostCardLoader />}\n<div\n  className=\"mx-auto flex max-w-6xl justify-center opacity-0\"\n  ref={ref}\n/>\n//....\n```\n\nIf you look at the browser again, we now have a nice loading indicator to tell users there are more posts to see.\n\n🎉🎉 That's it if for the React part. You can use it in a pure React app. The only thing needs to change is add your own backend API.\n\n### Add GetServerSideProps\n\nThe following part is for Next.js. For better SEO, we can pre-render the first query result(4 posts in our case) on the server. Or if you have a large amount of data set that doesn't change frequently, and you don't want to render them all at once, you can use GetStaticProps to generate some static data at build time.\n\nIf you take a look at the source code of page now you will notice that there are no contents between the divs. That's because intially `posts` is `undefined` and there's nothing to render until we get data from API route. It will work just fine if you don't care about it at all. But we're using NextJS, we have more control over what we need. That's why we love it so much, isn't it? Since we can write server-side code directly inside either `getServerSideProps` or `getStaticProps`, we can pre-render the first 4 posts and let React Query take care of the rest. The final code looks like this:\n\n```tsx:pages/index.tsx {7, 9, 26-30, 54-58, 82-94}\nimport { useEffect } from 'react'\nimport { useInfiniteQuery } from 'react-query'\nimport { useInView } from 'react-intersection-observer'\n\nimport PostCardLoader from '../src/components/PostCardLoader'\nimport PostCard from '../src/components/PostCard'\nimport prisma from '../src/lib/prisma'\n\nimport type { GetServerSideProps } from 'next'\nimport type { Post } from '@prisma/client'\n\nconst getPosts = async ({\n  pageParam = '',\n}: {\n  pageParam: string\n}): Promise<{ posts: Post[]; nextId: string }> => {\n  await new Promise((resolve) => setTimeout(resolve, 2000))\n\n  const res = await fetch(`/api/posts?cursor=${pageParam}`)\n  const data = await res.json()\n\n  return data\n}\n\nconst Home = ({\n  initialData,\n  nextId,\n}: {\n  initialData: Post[]\n  nextId: string\n}) => {\n  const {\n    data: posts,\n    fetchNextPage,\n    hasNextPage,\n    isFetchingNextPage,\n  } = useInfiniteQuery(\n    ['posts'],\n    ({ pageParam = nextId }) => getPosts({ pageParam }),\n    {\n      getNextPageParam: (lastPage) => lastPage.nextId ?? false,\n    }\n  )\n\n  const { inView, ref } = useInView({ threshold: 1, rootMargin: '0px' })\n  useEffect(() => {\n    if (inView && hasNextPage) {\n      fetchNextPage()\n    }\n  }, [inView, hasNextPage])\n\n  return (\n    <div className=\"mx-auto max-w-4xl bg-gray-50\">\n      <div className=\"m-6 mx-auto grid grid-cols-2 gap-6\">\n        {initialData.map((post) => (\n          <PostCard key={post.id} {...post} />\n        ))}\n      </div>\n\n      {posts &&\n        posts.pages?.flatMap((page, i) => {\n          return (\n            <div key={i} className=\"m-6 mx-auto grid grid-cols-2 gap-6\">\n              {page.posts.map((post) => {\n                return <PostCard key={post.id} {...post} />\n              })}\n            </div>\n          )\n        })}\n\n      {isFetchingNextPage && <PostCardLoader />}\n      <div\n        className=\"mx-auto flex max-w-6xl justify-center opacity-0\"\n        ref={ref}\n      />\n    </div>\n  )\n}\n\nexport default Home\n\nexport const getServerSideProps: GetServerSideProps = async () => {\n  const posts = await prisma.post.findMany({\n    take: 4,\n    select: { content: true, title: true, imageUrl: true, id: true },\n  })\n  const nextId = posts[3].id\n  return {\n    props: {\n      initialData: posts,\n      nextId,\n    },\n  }\n}\n\n```\n\nNow you have added a fully functional infinite scroll feature in the Next.js app and React app.\n\n## Final Touch\n\nIf you have a large project, you may want to put the `getPosts` function in its own file and extract `useInfiniteQuery` hook to make it more generic. Also, we may create a `PostList` component that recieve an array of `PostCard` since we are using it twice inside one page. Besides, notice that as we are always fetching 4 posts in each query, we can define a `const` that holds the value of how many posts we want to have, let's call it `POST_LIMIT` or `POST_TAKE`, then we can use it both in the API route and other pages. By doing so, we avoid using [magic number](<https://en.wikipedia.org/wiki/Magic_number_(programming)>) and see what the code does.\n\nInfinite scrolling may not be suitable for every website. I found this [article](https://www.nngroup.com/articles/infinite-scrolling/) explains quite well about when to use it.\n\nSome useful links on this article\n\n1. [Infinite Scrolling](https://www.smashingmagazine.com/2013/05/infinite-scrolling-lets-get-to-the-bottom-of-this/)\n2. [Prisma Pagination](https://www.prisma.io/docs/concepts/components/prisma-client/pagination)\n3. [React Query Infinite Scroll](https://react-query.tanstack.com/examples/load-more-infinite-scroll)\n4. [Data fetching in Next.js](https://nextjs.org/docs/basic-features/data-fetching/overview)\n\nThat's it for today, thanks for reading and happy coding!\n",
          "code": "var Component=(()=>{var mn=Object.create;var A=Object.defineProperty;var pn=Object.getOwnPropertyDescriptor;var bn=Object.getOwnPropertyNames;var xn=Object.getPrototypeOf,hn=Object.prototype.hasOwnProperty;var G=(c,n)=>()=>(n||c((n={exports:{}}).exports,n),n.exports),_n=(c,n)=>{for(var m in n)A(c,m,{get:n[m],enumerable:!0})},ge=(c,n,m,k)=>{if(n&&typeof n==\"object\"||typeof n==\"function\")for(let N of bn(n))!hn.call(c,N)&&N!==m&&A(c,N,{get:()=>n[N],enumerable:!(k=pn(n,N))||k.enumerable});return c};var Nn=(c,n,m)=>(m=c!=null?mn(xn(c)):{},ge(n||!c||!c.__esModule?A(m,\"default\",{value:c,enumerable:!0}):m,c)),kn=c=>ge(A({},\"__esModule\",{value:!0}),c);var Pe=G((In,we)=>{we.exports=React});var Ue=G(K=>{\"use strict\";(function(){\"use strict\";var c=Pe(),n=Symbol.for(\"react.element\"),m=Symbol.for(\"react.portal\"),k=Symbol.for(\"react.fragment\"),N=Symbol.for(\"react.strict_mode\"),X=Symbol.for(\"react.profiler\"),z=Symbol.for(\"react.provider\"),J=Symbol.for(\"react.context\"),R=Symbol.for(\"react.forward_ref\"),D=Symbol.for(\"react.suspense\"),q=Symbol.for(\"react.suspense_list\"),T=Symbol.for(\"react.memo\"),F=Symbol.for(\"react.lazy\"),Te=Symbol.for(\"react.offscreen\"),Z=Symbol.iterator,Se=\"@@iterator\";function Ce(e){if(e===null||typeof e!=\"object\")return null;var r=Z&&e[Z]||e[Se];return typeof r==\"function\"?r:null}var g=c.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function p(e){{for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];je(\"error\",e,i)}}function je(e,r,i){{var a=g.ReactDebugCurrentFrame,o=a.getStackAddendum();o!==\"\"&&(r+=\"%s\",i=i.concat([o]));var l=i.map(function(d){return String(d)});l.unshift(\"Warning: \"+r),Function.prototype.apply.call(console[e],console,l)}}var Oe=!1,Ae=!1,De=!1,qe=!1,Fe=!1,ee;ee=Symbol.for(\"react.module.reference\");function Me(e){return!!(typeof e==\"string\"||typeof e==\"function\"||e===k||e===X||Fe||e===N||e===D||e===q||qe||e===Te||Oe||Ae||De||typeof e==\"object\"&&e!==null&&(e.$$typeof===F||e.$$typeof===T||e.$$typeof===z||e.$$typeof===J||e.$$typeof===R||e.$$typeof===ee||e.getModuleId!==void 0))}function Qe(e,r,i){var a=e.displayName;if(a)return a;var o=r.displayName||r.name||\"\";return o!==\"\"?i+\"(\"+o+\")\":i}function ne(e){return e.displayName||\"Context\"}function _(e){if(e==null)return null;if(typeof e.tag==\"number\"&&p(\"Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue.\"),typeof e==\"function\")return e.displayName||e.name||null;if(typeof e==\"string\")return e;switch(e){case k:return\"Fragment\";case m:return\"Portal\";case X:return\"Profiler\";case N:return\"StrictMode\";case D:return\"Suspense\";case q:return\"SuspenseList\"}if(typeof e==\"object\")switch(e.$$typeof){case J:var r=e;return ne(r)+\".Consumer\";case z:var i=e;return ne(i._context)+\".Provider\";case R:return Qe(e,e.render,\"ForwardRef\");case T:var a=e.displayName||null;return a!==null?a:_(e.type)||\"Memo\";case F:{var o=e,l=o._payload,d=o._init;try{return _(d(l))}catch{return null}}}return null}var y=Object.assign,U=0,te,re,ie,ae,se,de,oe;function ce(){}ce.__reactDisabledLog=!0;function Ve(){{if(U===0){te=console.log,re=console.info,ie=console.warn,ae=console.error,se=console.group,de=console.groupCollapsed,oe=console.groupEnd;var e={configurable:!0,enumerable:!0,value:ce,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}U++}}function Le(){{if(U--,U===0){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:y({},e,{value:te}),info:y({},e,{value:re}),warn:y({},e,{value:ie}),error:y({},e,{value:ae}),group:y({},e,{value:se}),groupCollapsed:y({},e,{value:de}),groupEnd:y({},e,{value:oe})})}U<0&&p(\"disabledDepth fell below zero. This is a bug in React. Please file an issue.\")}}var M=g.ReactCurrentDispatcher,Q;function S(e,r,i){{if(Q===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\\n( *(at )?)/);Q=a&&a[1]||\"\"}return`\n`+Q+e}}var V=!1,C;{var We=typeof WeakMap==\"function\"?WeakMap:Map;C=new We}function le(e,r){if(!e||V)return\"\";{var i=C.get(e);if(i!==void 0)return i}var a;V=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var l;l=M.current,M.current=null,Ve();try{if(r){var d=function(){throw Error()};if(Object.defineProperty(d.prototype,\"props\",{set:function(){throw Error()}}),typeof Reflect==\"object\"&&Reflect.construct){try{Reflect.construct(d,[])}catch(x){a=x}Reflect.construct(e,[],d)}else{try{d.call()}catch(x){a=x}e.call(d.prototype)}}else{try{throw Error()}catch(x){a=x}e()}}catch(x){if(x&&a&&typeof x.stack==\"string\"){for(var s=x.stack.split(`\n`),b=a.stack.split(`\n`),u=s.length-1,f=b.length-1;u>=1&&f>=0&&s[u]!==b[f];)f--;for(;u>=1&&f>=0;u--,f--)if(s[u]!==b[f]){if(u!==1||f!==1)do if(u--,f--,f<0||s[u]!==b[f]){var h=`\n`+s[u].replace(\" at new \",\" at \");return e.displayName&&h.includes(\"<anonymous>\")&&(h=h.replace(\"<anonymous>\",e.displayName)),typeof e==\"function\"&&C.set(e,h),h}while(u>=1&&f>=0);break}}}finally{V=!1,M.current=l,Le(),Error.prepareStackTrace=o}var P=e?e.displayName||e.name:\"\",v=P?S(P):\"\";return typeof e==\"function\"&&C.set(e,v),v}function Ye(e,r,i){return le(e,!1)}function $e(e){var r=e.prototype;return!!(r&&r.isReactComponent)}function j(e,r,i){if(e==null)return\"\";if(typeof e==\"function\")return le(e,$e(e));if(typeof e==\"string\")return S(e);switch(e){case D:return S(\"Suspense\");case q:return S(\"SuspenseList\")}if(typeof e==\"object\")switch(e.$$typeof){case R:return Ye(e.render);case T:return j(e.type,r,i);case F:{var a=e,o=a._payload,l=a._init;try{return j(l(o),r,i)}catch{}}}return\"\"}var I=Object.prototype.hasOwnProperty,ue={},fe=g.ReactDebugCurrentFrame;function O(e){if(e){var r=e._owner,i=j(e.type,e._source,r?r.type:null);fe.setExtraStackFrame(i)}else fe.setExtraStackFrame(null)}function Be(e,r,i,a,o){{var l=Function.call.bind(I);for(var d in e)if(l(e,d)){var s=void 0;try{if(typeof e[d]!=\"function\"){var b=Error((a||\"React class\")+\": \"+i+\" type `\"+d+\"` is invalid; it must be a function, usually from the `prop-types` package, but received `\"+typeof e[d]+\"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.\");throw b.name=\"Invariant Violation\",b}s=e[d](r,d,a,i,null,\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\")}catch(u){s=u}s&&!(s instanceof Error)&&(O(o),p(\"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).\",a||\"React class\",i,d,typeof s),O(null)),s instanceof Error&&!(s.message in ue)&&(ue[s.message]=!0,O(o),p(\"Failed %s type: %s\",i,s.message),O(null))}}}var He=Array.isArray;function L(e){return He(e)}function Ge(e){{var r=typeof Symbol==\"function\"&&Symbol.toStringTag,i=r&&e[Symbol.toStringTag]||e.constructor.name||\"Object\";return i}}function Ke(e){try{return me(e),!1}catch{return!0}}function me(e){return\"\"+e}function pe(e){if(Ke(e))return p(\"The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.\",Ge(e)),me(e)}var E=g.ReactCurrentOwner,Xe={key:!0,ref:!0,__self:!0,__source:!0},be,xe,W;W={};function ze(e){if(I.call(e,\"ref\")){var r=Object.getOwnPropertyDescriptor(e,\"ref\").get;if(r&&r.isReactWarning)return!1}return e.ref!==void 0}function Je(e){if(I.call(e,\"key\")){var r=Object.getOwnPropertyDescriptor(e,\"key\").get;if(r&&r.isReactWarning)return!1}return e.key!==void 0}function Ze(e,r){if(typeof e.ref==\"string\"&&E.current&&r&&E.current.stateNode!==r){var i=_(E.current.type);W[i]||(p('Component \"%s\" contains the string ref \"%s\". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',_(E.current.type),e.ref),W[i]=!0)}}function en(e,r){{var i=function(){be||(be=!0,p(\"%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",r))};i.isReactWarning=!0,Object.defineProperty(e,\"key\",{get:i,configurable:!0})}}function nn(e,r){{var i=function(){xe||(xe=!0,p(\"%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)\",r))};i.isReactWarning=!0,Object.defineProperty(e,\"ref\",{get:i,configurable:!0})}}var tn=function(e,r,i,a,o,l,d){var s={$$typeof:n,type:e,key:r,ref:i,props:d,_owner:l};return s._store={},Object.defineProperty(s._store,\"validated\",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(s,\"_self\",{configurable:!1,enumerable:!1,writable:!1,value:a}),Object.defineProperty(s,\"_source\",{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.freeze&&(Object.freeze(s.props),Object.freeze(s)),s};function rn(e,r,i,a,o){{var l,d={},s=null,b=null;i!==void 0&&(pe(i),s=\"\"+i),Je(r)&&(pe(r.key),s=\"\"+r.key),ze(r)&&(b=r.ref,Ze(r,o));for(l in r)I.call(r,l)&&!Xe.hasOwnProperty(l)&&(d[l]=r[l]);if(e&&e.defaultProps){var u=e.defaultProps;for(l in u)d[l]===void 0&&(d[l]=u[l])}if(s||b){var f=typeof e==\"function\"?e.displayName||e.name||\"Unknown\":e;s&&en(d,f),b&&nn(d,f)}return tn(e,s,b,o,a,E.current,d)}}var Y=g.ReactCurrentOwner,he=g.ReactDebugCurrentFrame;function w(e){if(e){var r=e._owner,i=j(e.type,e._source,r?r.type:null);he.setExtraStackFrame(i)}else he.setExtraStackFrame(null)}var $;$=!1;function B(e){return typeof e==\"object\"&&e!==null&&e.$$typeof===n}function _e(){{if(Y.current){var e=_(Y.current.type);if(e)return`\n\nCheck the render method of \\``+e+\"`.\"}return\"\"}}function an(e){{if(e!==void 0){var r=e.fileName.replace(/^.*[\\\\\\/]/,\"\"),i=e.lineNumber;return`\n\nCheck your code at `+r+\":\"+i+\".\"}return\"\"}}var Ne={};function sn(e){{var r=_e();if(!r){var i=typeof e==\"string\"?e:e.displayName||e.name;i&&(r=`\n\nCheck the top-level render call using <`+i+\">.\")}return r}}function ke(e,r){{if(!e._store||e._store.validated||e.key!=null)return;e._store.validated=!0;var i=sn(r);if(Ne[i])return;Ne[i]=!0;var a=\"\";e&&e._owner&&e._owner!==Y.current&&(a=\" It was passed a child from \"+_(e._owner.type)+\".\"),w(e),p('Each child in a list should have a unique \"key\" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',i,a),w(null)}}function ye(e,r){{if(typeof e!=\"object\")return;if(L(e))for(var i=0;i<e.length;i++){var a=e[i];B(a)&&ke(a,r)}else if(B(e))e._store&&(e._store.validated=!0);else if(e){var o=Ce(e);if(typeof o==\"function\"&&o!==e.entries)for(var l=o.call(e),d;!(d=l.next()).done;)B(d.value)&&ke(d.value,r)}}}function dn(e){{var r=e.type;if(r==null||typeof r==\"string\")return;var i;if(typeof r==\"function\")i=r.propTypes;else if(typeof r==\"object\"&&(r.$$typeof===R||r.$$typeof===T))i=r.propTypes;else return;if(i){var a=_(r);Be(i,e.props,\"prop\",a,e)}else if(r.PropTypes!==void 0&&!$){$=!0;var o=_(r);p(\"Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?\",o||\"Unknown\")}typeof r.getDefaultProps==\"function\"&&!r.getDefaultProps.isReactClassApproved&&p(\"getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.\")}}function on(e){{for(var r=Object.keys(e.props),i=0;i<r.length;i++){var a=r[i];if(a!==\"children\"&&a!==\"key\"){w(e),p(\"Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.\",a),w(null);break}}e.ref!==null&&(w(e),p(\"Invalid attribute `ref` supplied to `React.Fragment`.\"),w(null))}}var ve={};function cn(e,r,i,a,o,l){{var d=Me(e);if(!d){var s=\"\";(e===void 0||typeof e==\"object\"&&e!==null&&Object.keys(e).length===0)&&(s+=\" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.\");var b=an(o);b?s+=b:s+=_e();var u;e===null?u=\"null\":L(e)?u=\"array\":e!==void 0&&e.$$typeof===n?(u=\"<\"+(_(e.type)||\"Unknown\")+\" />\",s=\" Did you accidentally export a JSX literal instead of a component?\"):u=typeof e,p(\"React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s\",u,s)}var f=rn(e,r,i,o,l);if(f==null)return f;if(d){var h=r.children;if(h!==void 0)if(a)if(L(h)){for(var P=0;P<h.length;P++)ye(h[P],e);Object.freeze&&Object.freeze(h)}else p(\"React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.\");else ye(h,e)}if(I.call(r,\"key\")){var v=_(e),x=Object.keys(r).filter(function(fn){return fn!==\"key\"}),H=x.length>0?\"{key: someKey, \"+x.join(\": ..., \")+\": ...}\":\"{key: someKey}\";if(!ve[v+H]){var un=x.length>0?\"{\"+x.join(\": ..., \")+\": ...}\":\"{}\";p(`A props object containing a \"key\" prop is being spread into JSX:\n  let props = %s;\n  <%s {...props} />\nReact keys must be passed directly to JSX without using spread:\n  let props = %s;\n  <%s key={someKey} {...props} />`,H,v,un,v),ve[v+H]=!0}}return e===k?on(f):dn(f),f}}var ln=cn;K.Fragment=k,K.jsxDEV=ln})()});var Ee=G((Rn,Ie)=>{\"use strict\";Ie.exports=Ue()});var Pn={};_n(Pn,{default:()=>gn,frontmatter:()=>yn});var t=Nn(Ee()),yn={type:\"Post\",title:\"Infinite Scrolling With React Query And Prisma In Next.js\",publishedAt:\"March 3, 2022\",isPublished:!0,description:\"Add infinite scrolling feature to your next React project.\",toc:!0,category:\"web\",image:\"/assets/images/infinite-scrolling-with-react-query-and-prisma/bg.avif\",tags:[\"react\",\"nextjs\",\"react-query\",\"prisma\",\"typescript\",\"infinite-scrolling\",\"pagination\"],thumbnail:{author:\"Andras Vas\",url:\"/assets/images/infinite-scrolling-with-react-query-and-prisma/bg.avif\",from:\"https://unsplash.com/@wasdrew\"}};function Re(c){let n=Object.assign({h2:\"h2\",p:\"p\",a:\"a\",blockquote:\"blockquote\",ul:\"ul\",li:\"li\",code:\"code\",h3:\"h3\",pre:\"pre\",em:\"em\",ol:\"ol\"},c.components),{MDXImage:m}=n;return m||wn(\"MDXImage\",!0,\"118:1-121:3\"),(0,t.jsxDEV)(t.Fragment,{children:[(0,t.jsxDEV)(n.h2,{children:\"Intro\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:26,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"Infinite scrolling is a common technique used in many web apps, especially on large social websites. It allows users to keep scrolling to the page without clicking pagination buttons. While in the background it loads content continuously. The homepage of \",(0,t.jsxDEV)(n.a,{href:\"https://twitter.com/\",children:\"Twitter\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:28,columnNumber:256},this),\" and \",(0,t.jsxDEV)(n.a,{href:\"https://dev.to/\",children:\"DevTo\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:28,columnNumber:292},this),` are two good examples. I'm a big fan of it simply because sometimes I'm just too lazy to click a button. No doubt there are downsides to it, or maybe some people even hate it. But it's always fun trying something new, especially putting the technology you love together.\nIf you also love the tools I'm using, please keep reading and follow along. I'll try my best to provide detailed explanations.`]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:28,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"One reason I love Next.js is that it can serve static pages and server-side rendering. In the scenario where you have a large amount of dataset that you don't want to render all at a time. By only generating a fraction of it at request time or build time, then on the client-side implementing the infinite scrolling technique to fetch more data seems to be a solid option.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:31,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.blockquote,{children:[`\n`,(0,t.jsxDEV)(n.p,{children:\"\\u2728 This article assumes that you are comfortable working with Next.js, React Query and Prisma. If not, I've listed some links at the very bottom of the page for you to reference.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:33,columnNumber:3},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"\\u{1F331} For saving your time, I've created ready-to-use repo in Github. Clone the \",(0,t.jsxDEV)(n.a,{href:\"https://github.com/patrick-xin/infinite-scroll-with-react-query-nextjs\",children:\"starter\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:35,columnNumber:80},this),\" branch as I've set up all the tools and packages we need. You can also view the folder structure and create a new app yourself based on what you need.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:35,columnNumber:3},this),`\n`]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:33,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h2,{children:\"What's Inside Repo?\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:37,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"Skip this section if you're going to clone the repo.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:39,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.ul,{children:[`\n`,(0,t.jsxDEV)(n.li,{children:\"Next.js app with Typescript.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:41,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:[\"Prisma. For local database connection, follow steps \",(0,t.jsxDEV)(n.a,{href:\"https://www.prisma.io/docs/getting-started/quickstart\",children:\"here\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:42,columnNumber:55},this),\" and create a \",(0,t.jsxDEV)(n.code,{children:\"Post Model\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:42,columnNumber:130},this),\".\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:42,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:[\"React Query. For using it within a NextJS app, add \",(0,t.jsxDEV)(n.a,{href:\"https://react-query.tanstack.com/guides/ssr\",children:\"code blocks\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:43,columnNumber:54},this),\" to the \",(0,t.jsxDEV)(n.code,{children:\"_app.tsx\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:43,columnNumber:120},this)]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:43,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:\"Tailwind CSS. I have completely given up writing pure css or styled components now.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:44,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:41,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h2,{children:\"Setup Backend\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:46,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"Connect Prisma\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:48,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"I'm assuming you are ready to get started. First thing first, we need to connect to the local database. Create an \",(0,t.jsxDEV)(n.code,{children:\".env\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:50,columnNumber:115},this),\" in the root folder and add your local database url: \",(0,t.jsxDEV)(n.code,{children:\"DATABASE_URL=YOUR_DATABASE_URL\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:50,columnNumber:174},this),\". Run \",(0,t.jsxDEV)(n.code,{children:\"yarn\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:50,columnNumber:212},this),\" to install packages. Then \",(0,t.jsxDEV)(n.code,{children:\"yarn prisma migrate dev --name 'init'\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:50,columnNumber:245},this),\" to sync your local database with Prisma. It will also seed the fake posts data inside \",(0,t.jsxDEV)(n.code,{children:\"_mock_\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:50,columnNumber:371},this),\" folder into the database. After that run \",(0,t.jsxDEV)(n.code,{children:\"yarn prisma studio\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:50,columnNumber:421},this),\", a browser window will pop up. You'll see 18 posts if everying works fine.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:50,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"Create API Route\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:52,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"Inside \",(0,t.jsxDEV)(n.code,{children:\"pages\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:54,columnNumber:8},this),\", create a folder called \",(0,t.jsxDEV)(n.code,{children:\"api\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:54,columnNumber:40},this),\", then create a file \",(0,t.jsxDEV)(n.code,{children:\"posts.ts\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:54,columnNumber:66},this),\" inside.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:54,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-ts:api/posts.ts\",children:`import prisma from '../../src/lib/prisma'\nimport type { NextApiHandler } from 'next'\n\nconst handler: NextApiHandler = async (req, res) => {\n   try {\n    const posts = await prisma.post.findMany()\n    res.status(200).json(posts)\n  } catch (error) {\n    res.status(400).end()\n  }\n}\nexport default handler\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:56,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:56,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"This API route is the only route we're going to use. For now, it will return all 18 posts, but we'll make it return the correct data we need later.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:71,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"Render Posts\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:73,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-tsx:pages/index.tsx\",children:`import { useQuery } from 'react-query'\nimport PostCard from '../src/components/PostCard'\nimport type { Post } from '@prisma/client'\nimport type { NextPage } from 'next'\n\nconst getPosts = async (): Promise<Post[]> => {\n  const res = await fetch(\\`/api/posts\\`)\n  const data = await res.json()\n  return data\n}\n\nconst Home: NextPage = () => {\n  const { data: posts } = useQuery(['posts'], getPosts)\n\n  return (\n    <div className=\"mx-auto max-w-4xl bg-gray-50\">\n      <div className=\"m-6 mx-auto grid grid-cols-2 gap-6\">\n        {posts && posts.map((post) => <PostCard key={post.id} {...post} />)}\n      </div>\n    </div>\n  )\n}\n\nexport default Home\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:75,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:75,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"Now we got the app running and ready to implement infinite scrolling.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:102,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h2,{children:\"Infinite Scrolling\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:104,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"Under the hood, infinite scrolling is just another form of pagination. They all use the same technique querying the database. Two types of most common infinite scrolling are:\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:106,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.ul,{children:[`\n`,(0,t.jsxDEV)(n.li,{children:\"adding a load more button\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:108,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:[\"placing a hidden \",(0,t.jsxDEV)(n.code,{children:\"div\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:109,columnNumber:20},this),\" at the bottom of the page.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:109,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:108,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"The difference is that the latter uses intersection observer to detect whether there are more contents in the view. If so, you can keep scrolling until there is no data. In order to understand how infinite scrolling works, we have to dive into how pagination works in Prisma first.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:111,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"How Pagination Works In Prisma?\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:113,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"There are two types of pagination in Prisma: \",(0,t.jsxDEV)(n.em,{children:\"offset pagination\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:115,columnNumber:46},this),\" and \",(0,t.jsxDEV)(n.em,{children:\"cursor-based pagination\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:115,columnNumber:70},this),\". In order to make React Query work, we will use the latter. You can check the details of what are the differences between these two in the \",(0,t.jsxDEV)(n.a,{href:\"https://www.prisma.io/docs/concepts/components/prisma-client/pagination\",children:\"doc\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:115,columnNumber:235},this),`.\nI have to admit the first time when I read the documentation I was still muddled. If you are too, I've created some illustrations of how it works.`]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:115,columnNumber:1},this),`\n`,(0,t.jsxDEV)(m,{src:\"/assets/images/infinite-scrolling-with-react-query-and-prisma/illustration.png\",alt:\"pagination-illustration\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:118,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"In the code:\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:123,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-ts:sudo\",children:`// Sudo code\n\n// First query\nconst firstQueryResult = await prisma.post.findMany({\n  skip: 0,\n  take: 4,\n  cursor: {\n    id: post4.id,\n  },\n})\n\n// Second query\nconst secondQueryResult = await prisma.post.findMany({\n  // skip post4\n  skip: 1,\n  take: 4,\n  cursor: {\n    id: post8.id,\n  },\n})\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:125,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:125,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.ul,{children:[`\n`,(0,t.jsxDEV)(n.li,{children:[(0,t.jsxDEV)(n.code,{children:\"take\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:148,columnNumber:3},this),\" is how many posts we want to have in each query.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:148,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:[\"always \",(0,t.jsxDEV)(n.code,{children:\"skip 1\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:149,columnNumber:10},this),\" after first query, but not in the last query.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:149,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:[(0,t.jsxDEV)(n.code,{children:\"cursor\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:150,columnNumber:3},this),\" is an \",(0,t.jsxDEV)(n.code,{children:\"object\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:150,columnNumber:18},this),\" where it will be used as the starting point in the next query.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:150,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:148,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"We can keep fetching more posts as long as the \",(0,t.jsxDEV)(n.code,{children:\"cursor\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:152,columnNumber:48},this),\" is not \",(0,t.jsxDEV)(n.code,{children:\"undefined\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:152,columnNumber:64},this),`.\nHopefully, the picture and the code are clear enough to understand, not the other way around.`]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:152,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"If you're still confused, read the \",(0,t.jsxDEV)(n.a,{href:\"https://www.prisma.io/docs/concepts/components/prisma-client/pagination#cursor-based-pagination\",children:\"doc\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:155,columnNumber:36},this),\" or leave a comment below. If not, let's continue and add the following code to the \",(0,t.jsxDEV)(n.code,{children:\"posts.ts\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:155,columnNumber:222},this),\" file.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:155,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-ts:api/posts.ts\",children:`// ......\nconst handler: NextApiHandler = async (req, res) => {\n  const take = 4\n  const cursorQuery = (req.query.cursor as string) ?? undefined\n  const skip = cursorQuery ? 1 : 0\n  const cursor = cursorQuery ? { id: cursorQuery } : undefined\n\n  try {\n    const posts = await prisma.post.findMany({\n      skip,\n      take,\n      cursor,\n    })\n\n    res.status(200).json({\n      posts,\n    })\n  } catch (error) {\n    res.status(400).end()\n  }\n}\n// ......\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:157,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:157,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"In the above code, \",(0,t.jsxDEV)(n.code,{children:\"cursorQuery\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:182,columnNumber:20},this),\" is the query string we pass from the client. If you remember from the picture above, it's just a simple \",(0,t.jsxDEV)(n.code,{children:\"postId\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:182,columnNumber:138},this),\" string.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:182,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"useInfiniteQuery\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:184,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"React Query comes with a hook in handy called \",(0,t.jsxDEV)(n.code,{children:\"useInfiniteQuery\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:186,columnNumber:47},this),\", which takes care of all the complicated logic for us already. You may want to take a look at the \",(0,t.jsxDEV)(n.a,{href:\"https://react-query.tanstack.com/guides/infinite-queries\",children:\"doc\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:186,columnNumber:164},this),\" if you've never used it before. Like \",(0,t.jsxDEV)(n.code,{children:\"useQuery\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:186,columnNumber:265},this),\" hook, this hook takes a unique \",(0,t.jsxDEV)(n.code,{children:\"key\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:186,columnNumber:307},this),` as\nit's `,(0,t.jsxDEV)(n.code,{children:\"queryKey\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:187,columnNumber:6},this),\". But the query function now receives an \",(0,t.jsxDEV)(n.code,{children:\"object\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:187,columnNumber:57},this),\" with \",(0,t.jsxDEV)(n.code,{children:\"pageParam\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:187,columnNumber:71},this),\" property inside. We'll pass \",(0,t.jsxDEV)(n.code,{children:\"postId\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:187,columnNumber:111},this),\" as an argumment into this function later. The basic manner looks like this:\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:186,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-ts\",children:`const {\n  fetchNextPage,\n  fetchPreviousPage,\n  hasNextPage,\n  hasPreviousPage,\n  isFetchingNextPage,\n  isFetchingPreviousPage,\n} = useInfiniteQuery(queryKey, ({ pageParam = 1 }) => fetchPage(pageParam), {\n  ...options,\n  getNextPageParam: (lastPage, allPages) => lastPage.nextCursor,\n  getPreviousPageParam: (firstPage, allPages) => firstPage.prevCursor,\n})\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:189,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:189,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"Let's refactor the \",(0,t.jsxDEV)(n.code,{children:\"getPosts\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:204,columnNumber:20},this),\" function to make it match the shape of \",(0,t.jsxDEV)(n.code,{children:\"useInfiniteQuery\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:204,columnNumber:70},this),\". It will take \",(0,t.jsxDEV)(n.code,{children:\"pageParam\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:204,columnNumber:103},this),\" as the parameter and uses it as the query string. (Don't forget it's \",(0,t.jsxDEV)(n.code,{children:\"cursorQuery\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:204,columnNumber:184},this),\" on the API route). In addtion to the returned posts, it also return another property \",(0,t.jsxDEV)(n.code,{children:\"nextId\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:204,columnNumber:283},this),\". \",(0,t.jsxDEV)(n.code,{children:\"nextId\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:204,columnNumber:293},this),\" will be used in the \",(0,t.jsxDEV)(n.code,{children:\"getNextPageParam\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:204,columnNumber:322},this),\" function in React Query to decide if there will be more data to fetch or not.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:204,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-tsx:index.tsx\",children:`const getPosts = async ({\n  pageParam = '',\n}: {\n  pageParam: string\n}): Promise<{ posts: Post[]; nextId: string | undefined }> => {\n  const res = await fetch(\\`/api/posts?cursor=\\${pageParam}\\`)\n  const data = await res.json()\n\n  return data\n}\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:206,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:206,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"Replace \",(0,t.jsxDEV)(n.code,{children:\"useQuery\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:219,columnNumber:9},this),\" with \",(0,t.jsxDEV)(n.code,{children:\"useInfiniteQuery\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:219,columnNumber:25},this),\".\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:219,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-tsx:index.tsx\",children:`const {\n  data: posts,\n} = useInfiniteQuery(\n  ['posts'],\n  ({ pageParam = '' }) => getPosts({ pageParam }),\n  {\n    // lastPage is the data returned from getPosts function\n    getNextPageParam: (lastPage) => lastPage.nextId ?? false,\n  }\n)\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:221,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:221,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"Back to \",(0,t.jsxDEV)(n.code,{children:\"posts.ts\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:234,columnNumber:9},this),\", we need to return \",(0,t.jsxDEV)(n.code,{children:\"nextId\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:234,columnNumber:39},this),\".\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:234,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-ts:api/posts.ts\",children:`//......\ntry {\n  const posts = await prisma.post.findMany({\n    skip,\n    take,\n    cursor,\n  })\n  // Don't forget 0 based index\n  // posts.length < take means there are no more posts to fetch\n  const nextId = posts.length < take ? undefined : posts[take - 1].id\n  // posts.length is either equals or less than take, this code below will also work\n  // const nextId = posts.length === take ? posts[take - 1].id : undefined\n  res.status(200).json({\n    posts,\n    nextId,\n  })\n} catch (error) {\n  res.status(400).end()\n}\n//.....\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:236,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:236,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"Not sure what happened? Here is the visualization of how it works under the hood:\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:259,columnNumber:1},this),`\n`,(0,t.jsxDEV)(m,{src:\"/assets/images/infinite-scrolling-with-react-query-and-prisma/illustration-1.png\",alt:\"pagination-illustration\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:261,columnNumber:1},this),`\n`,(0,t.jsxDEV)(m,{src:\"/assets/images/infinite-scrolling-with-react-query-and-prisma/illustration-2.png\",alt:\"pagination-illustration\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:266,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"Finally, in the last query:\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:271,columnNumber:1},this),`\n`,(0,t.jsxDEV)(m,{src:\"/assets/images/infinite-scrolling-with-react-query-and-prisma/illustration-3.png\",alt:\"pagination-illustration\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:273,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:`I hope these illustrations will help you better understand the code we've written so far. If you find there's\nmore to improve, or still not clear, please feel free to leave a comment!`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:278,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"Add Intersection Observer\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:281,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"We're almost done! The last piece is to add intersection observer to fetch more posts when we're scrolling to the bottom of the page. Open a new terminal and run \",(0,t.jsxDEV)(n.code,{children:\"yarn add react-intersection-observer\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:283,columnNumber:163},this),\".\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:283,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-tsx:pages/index.tsx\",children:`import { useEffect } from 'react'\nimport { useInView } from 'react-intersection-observer'\nimport { useInfiniteQuery } from 'react-query'\n\nimport PostCard from '../src/components/PostCard'\n\nimport type { Post } from '@prisma/client'\n\nconst getPosts = async ({\n  pageParam = '',\n}: {\n  pageParam: string\n}): Promise<{ posts: Post[]; nextId: string }> => {\n  const res = await fetch(\\`/api/posts?cursor=\\${pageParam}\\`)\n  const data = await res.json()\n  return data\n}\n\nconst Home = () => {\n  const {\n    data: posts,\n    // call this function to get another 4 posts\n    fetchNextPage,\n    // flag to decide if there is more posts\n    hasNextPage,\n    // flag to indicate if we're fetching or not\n    isFetchingNextPage\n  } = useInfiniteQuery(\n    ['posts'],\n    ({ pageParam = '' }) => getPosts({ pageParam }),\n    {\n      getNextPageParam: (lastPage) => lastPage.nextId ?? false,\n    }\n  )\n\n  const { inView, ref } = useInView()\n\n  useEffect(() => {\n    if (inView && hasNextPage) {\n      fetchNextPage()\n    }\n  }, [inView, hasNextPage])\n\n  return (\n    <div className=\"mx-auto max-w-4xl bg-gray-50\">\n      {posts &&\n        posts.pages?.flatMap((page, i) => {\n          return (\n            <div key={i} className=\"m-6 mx-auto grid grid-cols-2 gap-6\">\n              {page.posts.map((post) => {\n                return <PostCard key={post.id} {...post} />\n              })}\n            </div>\n          )\n        })}\n      <div\n        className=\"mx-auto flex max-w-6xl justify-center opacity-0\"\n        ref={ref}\n      />\n    </div>\n  )\n}\n\nexport default Home\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:285,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:285,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"Since the data returned from the server has changed, we need also change \",(0,t.jsxDEV)(n.code,{children:\"mapping\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:352,columnNumber:74},this),\" function. Now the \",(0,t.jsxDEV)(n.code,{children:\"posts\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:352,columnNumber:102},this),\" have \",(0,t.jsxDEV)(n.code,{children:\"pages\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:352,columnNumber:115},this),\" property that contains all the data we need.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:352,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"Add Loading Indicator\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:354,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"Go back to browser you may won't notice any difference, that's because in our dev evironment, the connection to the database is pretty fast. To simulate a slow network and test the result, we can defer 2000ms in the \",(0,t.jsxDEV)(n.code,{children:\"getPosts\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:356,columnNumber:217},this),\" function before it returns data.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:356,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-tsx:pages/index.tsx\",children:`// ......\nconst getPosts = async ({\n  pageParam = '',\n}: {\n  pageParam: string\n}): Promise<{ posts: Post[]; nextId: string }> => {\n  await new Promise((resolve) => setTimeout(resolve, 2000))\n  const res = await fetch(\\`/api/posts?cursor=\\${pageParam}\\`)\n  const data = await res.json()\n\n  return data\n}\n// ......\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:358,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:358,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-tsx:pages/index.tsx\",children:`// ......\nimport PostCardLoader from '../src/components/PostCardLoader'\n// ......\n{posts &&\n  posts.pages?.flatMap((page, i) => {\n      return (\n        <div key={i} className=\"m-6 mx-auto grid grid-cols-2 gap-6\">\n          {page.posts.map((post) => {\n            return <PostCard key={post.id} {...post} />\n          })}\n        </div>\n      )\n})}\n {isFetchingNextPage && <PostCardLoader />}\n<div\n  className=\"mx-auto flex max-w-6xl justify-center opacity-0\"\n  ref={ref}\n/>\n//....\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:374,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:374,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"If you look at the browser again, we now have a nice loading indicator to tell users there are more posts to see.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:396,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"\\u{1F389}\\u{1F389} That's it if for the React part. You can use it in a pure React app. The only thing needs to change is add your own backend API.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:398,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h3,{children:\"Add GetServerSideProps\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:400,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"The following part is for Next.js. For better SEO, we can pre-render the first query result(4 posts in our case) on the server. Or if you have a large amount of data set that doesn't change frequently, and you don't want to render them all at once, you can use GetStaticProps to generate some static data at build time.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:402,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"If you take a look at the source code of page now you will notice that there are no contents between the divs. That's because intially \",(0,t.jsxDEV)(n.code,{children:\"posts\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:404,columnNumber:136},this),\" is \",(0,t.jsxDEV)(n.code,{children:\"undefined\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:404,columnNumber:147},this),\" and there's nothing to render until we get data from API route. It will work just fine if you don't care about it at all. But we're using NextJS, we have more control over what we need. That's why we love it so much, isn't it? Since we can write server-side code directly inside either \",(0,t.jsxDEV)(n.code,{children:\"getServerSideProps\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:404,columnNumber:445},this),\" or \",(0,t.jsxDEV)(n.code,{children:\"getStaticProps\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:404,columnNumber:469},this),\", we can pre-render the first 4 posts and let React Query take care of the rest. The final code looks like this:\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:404,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.pre,{children:(0,t.jsxDEV)(n.code,{className:\"language-tsx:pages/index.tsx\",children:`import { useEffect } from 'react'\nimport { useInfiniteQuery } from 'react-query'\nimport { useInView } from 'react-intersection-observer'\n\nimport PostCardLoader from '../src/components/PostCardLoader'\nimport PostCard from '../src/components/PostCard'\nimport prisma from '../src/lib/prisma'\n\nimport type { GetServerSideProps } from 'next'\nimport type { Post } from '@prisma/client'\n\nconst getPosts = async ({\n  pageParam = '',\n}: {\n  pageParam: string\n}): Promise<{ posts: Post[]; nextId: string }> => {\n  await new Promise((resolve) => setTimeout(resolve, 2000))\n\n  const res = await fetch(\\`/api/posts?cursor=\\${pageParam}\\`)\n  const data = await res.json()\n\n  return data\n}\n\nconst Home = ({\n  initialData,\n  nextId,\n}: {\n  initialData: Post[]\n  nextId: string\n}) => {\n  const {\n    data: posts,\n    fetchNextPage,\n    hasNextPage,\n    isFetchingNextPage,\n  } = useInfiniteQuery(\n    ['posts'],\n    ({ pageParam = nextId }) => getPosts({ pageParam }),\n    {\n      getNextPageParam: (lastPage) => lastPage.nextId ?? false,\n    }\n  )\n\n  const { inView, ref } = useInView({ threshold: 1, rootMargin: '0px' })\n  useEffect(() => {\n    if (inView && hasNextPage) {\n      fetchNextPage()\n    }\n  }, [inView, hasNextPage])\n\n  return (\n    <div className=\"mx-auto max-w-4xl bg-gray-50\">\n      <div className=\"m-6 mx-auto grid grid-cols-2 gap-6\">\n        {initialData.map((post) => (\n          <PostCard key={post.id} {...post} />\n        ))}\n      </div>\n\n      {posts &&\n        posts.pages?.flatMap((page, i) => {\n          return (\n            <div key={i} className=\"m-6 mx-auto grid grid-cols-2 gap-6\">\n              {page.posts.map((post) => {\n                return <PostCard key={post.id} {...post} />\n              })}\n            </div>\n          )\n        })}\n\n      {isFetchingNextPage && <PostCardLoader />}\n      <div\n        className=\"mx-auto flex max-w-6xl justify-center opacity-0\"\n        ref={ref}\n      />\n    </div>\n  )\n}\n\nexport default Home\n\nexport const getServerSideProps: GetServerSideProps = async () => {\n  const posts = await prisma.post.findMany({\n    take: 4,\n    select: { content: true, title: true, imageUrl: true, id: true },\n  })\n  const nextId = posts[3].id\n  return {\n    props: {\n      initialData: posts,\n      nextId,\n    },\n  }\n}\n\n`},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:406,columnNumber:1},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:406,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"Now you have added a fully functional infinite scroll feature in the Next.js app and React app.\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:504,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.h2,{children:\"Final Touch\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:506,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"If you have a large project, you may want to put the \",(0,t.jsxDEV)(n.code,{children:\"getPosts\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:508,columnNumber:54},this),\" function in its own file and extract \",(0,t.jsxDEV)(n.code,{children:\"useInfiniteQuery\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:508,columnNumber:102},this),\" hook to make it more generic. Also, we may create a \",(0,t.jsxDEV)(n.code,{children:\"PostList\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:508,columnNumber:173},this),\" component that recieve an array of \",(0,t.jsxDEV)(n.code,{children:\"PostCard\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:508,columnNumber:219},this),\" since we are using it twice inside one page. Besides, notice that as we are always fetching 4 posts in each query, we can define a \",(0,t.jsxDEV)(n.code,{children:\"const\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:508,columnNumber:361},this),\" that holds the value of how many posts we want to have, let's call it \",(0,t.jsxDEV)(n.code,{children:\"POST_LIMIT\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:508,columnNumber:439},this),\" or \",(0,t.jsxDEV)(n.code,{children:\"POST_TAKE\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:508,columnNumber:455},this),\", then we can use it both in the API route and other pages. By doing so, we avoid using \",(0,t.jsxDEV)(n.a,{href:\"https://en.wikipedia.org/wiki/Magic_number_(programming)\",children:\"magic number\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:508,columnNumber:554},this),\" and see what the code does.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:508,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:[\"Infinite scrolling may not be suitable for every website. I found this \",(0,t.jsxDEV)(n.a,{href:\"https://www.nngroup.com/articles/infinite-scrolling/\",children:\"article\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:510,columnNumber:72},this),\" explains quite well about when to use it.\"]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:510,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"Some useful links on this article\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:512,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.ol,{children:[`\n`,(0,t.jsxDEV)(n.li,{children:(0,t.jsxDEV)(n.a,{href:\"https://www.smashingmagazine.com/2013/05/infinite-scrolling-lets-get-to-the-bottom-of-this/\",children:\"Infinite Scrolling\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:514,columnNumber:4},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:514,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:(0,t.jsxDEV)(n.a,{href:\"https://www.prisma.io/docs/concepts/components/prisma-client/pagination\",children:\"Prisma Pagination\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:515,columnNumber:4},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:515,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:(0,t.jsxDEV)(n.a,{href:\"https://react-query.tanstack.com/examples/load-more-infinite-scroll\",children:\"React Query Infinite Scroll\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:516,columnNumber:4},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:516,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.li,{children:(0,t.jsxDEV)(n.a,{href:\"https://nextjs.org/docs/basic-features/data-fetching/overview\",children:\"Data fetching in Next.js\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:517,columnNumber:4},this)},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:517,columnNumber:1},this),`\n`]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:514,columnNumber:1},this),`\n`,(0,t.jsxDEV)(n.p,{children:\"That's it for today, thanks for reading and happy coding!\"},void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:519,columnNumber:1},this)]},void 0,!0,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\",lineNumber:1,columnNumber:1},this)}function vn(c={}){let{wrapper:n}=c.components||{};return n?(0,t.jsxDEV)(n,Object.assign({},c,{children:(0,t.jsxDEV)(Re,c,void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\"},this)}),void 0,!1,{fileName:\"/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx\"},this):Re(c)}var gn=vn;function wn(c,n,m){throw new Error(\"Expected \"+(n?\"component\":\"object\")+\" `\"+c+\"` to be defined: you likely forgot to import, pass, or provide it.\"+(m?\"\\nIt\\u2019s referenced in your code at `\"+m+\"` in `/Users/patrickxin/dev/patrick-xin/content/posts/_mdx_bundler_entry_point-f8c96eb9-0185-4b9f-a656-de6077d738fc.mdx`\":\"\"))}return kn(Pn);})();\n/*! Bundled license information:\n\nreact/cjs/react-jsx-dev-runtime.development.js:\n  (**\n   * @license React\n   * react-jsx-dev-runtime.development.js\n   *\n   * Copyright (c) Facebook, Inc. and its affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *)\n*/\n;return Component;"
        },
        "_id": "infinite-scrolling-with-react-query-and-prisma.mdx",
        "_raw": {
          "sourceFilePath": "infinite-scrolling-with-react-query-and-prisma.mdx",
          "sourceFileName": "infinite-scrolling-with-react-query-and-prisma.mdx",
          "sourceFileDir": ".",
          "contentType": "mdx",
          "flattenedPath": "infinite-scrolling-with-react-query-and-prisma"
        },
        "type": "Post",
        "readingTime": {
          "text": "13 min read",
          "minutes": 12.685,
          "time": 761100,
          "words": 2537
        },
        "wordCount": 2539,
        "slug": "infinite-scrolling-with-react-query-and-prisma",
        "url": "/post/infinite-scrolling-with-react-query-and-prisma"
      },
      "documentHash": "1720247163573",
      "hasWarnings": false,
      "documentTypeName": "Post"
    }
  }
}
